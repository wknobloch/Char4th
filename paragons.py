from libraries import *
#--------------------------------------------------------------------------------
#                                Paragon Classes
#--------------------------------------------------------------------------------


paragonList={
###Ardent Paragons###
"argent soul":feat([ft("feat",[
                feat([ft("paragonname","hammer of judgement")]),
                feat([ft("psps",["paragon",2])],"Paragon Power Points","You gain 2 additional power points",CHECK("level",11)),
                feat([],"Restoring Critical","When you score a critical with an ardent or argent soul power, 1 all in 5 squares can spend a healing surge",CHECK("level",11)),
                feat([],"Vitalizing Action",["When you spend an AP for an attack, you and each ally in 5 squares gains ",MOD("con")," temporary HP"],CHECK("level",11)),
                feat([],"Argent Devastation","Can critical on 19-20 with ardent or argent soul powers",CHECK("level",16)),
                feat([Power("Argent Strike",["augmentable","healing","psionic","radiant","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CHAMOD],"AC",damage(1,[CHAMOD]),["melee"]),
                             Hit("One ally within 5 squares of you can both spend a healing surge and shift 1 square as a free action.  If the ally doesn't spend a healing surge, he or she gains 10 temporary hit points."),
                             Augment(2),
                             Other("Hit: +1[W] damage.  Each ally within 3 squares of you can both spend a healing surge and shift 1 square as a free action.  Any ally who doesn't spend a healing surge gains 10 temporary hit points.")],"ardent","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Burgeoning Reserves",["healing","psionic"],"daily","standard",
                            [Target("One dying ally",("melee",1)),
                             Effect("The target can spend a healing surge, and he or she gains regeneration 5 until the end of your next turn."),
                             Sustain("minor","The regeneration persists.  You can sustain the regeneration only if the target is bloodied.")],"ardent","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Argent Flood",["healing","psionic","radiant","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CHAMOD],"AC",damage(4,[CHAMOD]),["melee"]),
                             Effect("Each ally within 5 squares of you can either spend a healing surge or gain temporary hit points equal to his or her healing surge value.")],"ardent","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","ardent"))
,"psionic binder":feat([ft("feat",[
                feat([ft("paragonname","psionic binder")]),
                feat([],"Constant Jailer","When you hit an immobilized creature with melee or close attack, it can't make saving throws on its turn against effects that immobilize",CHECK("level",11)),
                feat([],"Imprisoning Action","When you spend an AP to make an attack and the attack hits, the target is restrained (save ends).",CHECK("level",11)),
                feat([ft("psps",["paragon",2])],"Paragon Power Points","You gain 2 additional power points",CHECK("level",11)),
                feat([],"Crushing Walls","When you are adjacent to an immobilized enemy, that enemy grants combat advantage",CHECK("level",16)),
                feat([Power("Binding Strike",["augmentable","psionic","psychic","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CHAMOD],"AC",damage(1,[CHAMOD]),["melee"]),
                             Hit("The target is immobilized until the start of your next turn."),
                             Augment(2),
                             Other("Hit: As above +1[W] damage.")],"ardent","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Executioner's Summons",["psionic","teleportation"],"encounter","move",
                            [Requirement("You must be adjacent to an immobilized enemy"),
                             Target("One ally in burst",("close burst",5)),
                             Effect(["You teleport the target to a square adjacent to an immobilized enemy adjacent to you.  Until the end of your next turn, the target gains a +2 power bonus to attack rolls against that enemy and a +",MOD("wis")," power bonus to damage rolls against it."])],"ardent","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Perfect Prison",["fear","psionic","weapon","zone"],"daily","standard",
                            [Target("each enemy in burst"),Atk([CHAMOD],"AC",damage(2,[CHAMOD]),["melee"]),
                             Hit("The target is dazed and slowed (save ends both)."),
                             Effect("The burst creates a zone that lasts until the end of your next turn.  Dazed creatures cannot leave the zone.  As a move action, you can move the zone 3 squares."),
                             Sustain()],"ardent","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","ardent"))
,"stygian adept":feat([ft("feat",[
                feat([ft("paragonname","stygian adept")]),
                feat([],"Fleeing Fear","Whenever you hit an enemy with a fear power, you can slide the enemy 1 square",CHECK("level",11)),
                feat([ft("psps",["paragon",2])],"Paragon Power Points","You gain 2 additional power points",CHECK("level",11)),
                feat([],"Unraveling Action",["When you spend an AP to make a fear attack, each target hit has vulnerability ",MOD("con")," to all damage until the end of your next turn."],CHECK("level",11)),
                feat([],"Fearsome Zone","Enemies not immune to fear in any zone created by your psionic powers take a -2 penalty to attack rolls",CHECK("level",16)),
                feat([Power("Stygian Strike",["augmentable","psionic","psychic","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CHAMOD],"will",damage(1,[CHAMOD]),["melee"]),
                             Hit(["You push the target ",MOD("con")," squares."]),
                             Augment(2),
                             Other("Hit: As above, and you or one ally can make a melee basic attack against the target as an opportunity action at any point during the push.")],"ardent","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Haunting Shadows",["psionic","zone"],"daily","minor",
                            [Requirement("You must be adjacent to an immobilized enemy"),
                             Effect("The burst creates a zone that lasts until the end of your next turn.  When you move, the zone moves with you, remaining centered on you.  Your allies have concealment against enemies that are within the zone.",("close burst",3)),
                             Sustain()],"ardent","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Subconscious Horror",["conjuration","fear","psionic","psychic","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CHAMOD],"will",damage(3,[CHAMOD]),["melee"]),
                             Miss(),
                             Effect("You conjure a subconscious horror in an unoccupied square within 5 squares of you.  The horror lasts until the end of your next turn.  The horror is invisible to everyone but you and the target.  Whenever the target starts its turn and can see the horror, the taret must either end that turn farther away from the horror than where it started, by at least a number of squares equal to half its speed, or take 10 psychic damage and grant combat advantage until the start of its next turn."),
                             Sustain("minor","The horror persists, and you can move it 4 squares.")],"ardent","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","ardent"))
,"talaric strategist":feat([ft("feat",[
                feat([ft("paragonname","talaric strategist")]),
                feat([],"Anticipatory Action","When an enemy enters a square adjacent to you, you can spend an AP to take a standard action as an immediate interrupt",CHECK("level",11)),
                feat([ft("initiative",["power",2])],"Battle Instinct","You and allies within 5 squares of you gain a +2 power bonus to initiative checks",CHECK("level",11)),
                feat([ft("psps",["paragon",2])],"Paragon Power Points","You gain 2 additional power points",CHECK("level",11)),
                feat([],"Tactician's Surge","Whenever you use your Ardent Surge power, you can slide each ally in the burst 1 square.",CHECK("level",16)),
                feat([Power("Anticipation Tactics",["augmentable","psionic"],"encounter","immediate interrupt",
                            [Trigger("An enemy within 2 squares of you makes a melee attack"),
                             Target("one ally in burst",("close burst",3)),
                             Effect("The target can use a free action to shift 1 square and make a melee basic attack against the triggering enemy.  That attack deals 1d8 extra damage to the enemy."),
                             Augment(2),
                             Target("One or two allies in burst or you and one ally in burst."),
                             Effect("Each target can use a free action to shift 2 squares and make a basic attack against the triggering enemy")],"ardent","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Insightful Command",["psionic"],"daily","minor",
                            [Target("You and each ally in burst",("close burst",5)),
                             Effect("Each ally can either shift half his or her speed as a free action or gain a +3 bonus to all defenses until the end of your next turn.")],"ardent","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Combined Effort",["psionic","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CHAMOD],"AC",damage(4,[CHAMOD]),["melee"]),
                             Special("You gain a +1 bonus to the attack roll for each ally within 2 squares of the target."),
                             Hit("The target is dazed (save ends)."),
                             Miss("Half damage, and the target is dazed until the end of your next turn.")],"ardent","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","ardent"))
###Artificer Paragons###
,"battle engineer":feat([ft("feat",[
        feat([ft("paragonname","battle engineer")]),
                feat([],"Aggressive Action","When spending AP for an extra action, gain +1 to weapon attack rolls and +1d6 damage to weapon attacks until end of your next turn",CHECK("level",11)),
                feat([],"Brutal Enchantment","Whenever one of your artificer / battle engineer powers grant a bonus to ally's weapon damage rolls, that ally's weapon becomes brutal 1",CHECK("level",11)),
                feat([],"Accurate Enhancement","Whenver one of your artificer / battle engineer powers grant a bonus to ally's weapon attack rolls, that bonus increases by 2",CHECK("level",16)),
                feat([Power("Greater Magic Weapon",["arcane"],"encounter","standard",
                            [Target("one creature"),Atk([INTMOD,3],"AC",damage(2,[INTMOD]),[]),
                            Effect(["Each ally adjacent to you gains a +",lambda x:max(x.mod("wis"),x.mod("con"))," power bonus to attack rolls and to damage rolls until the end of your next turn."])],"artificer","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Fleeting Dweomer",["arcane"],"encounter","minor",
                            [Target("one weapon or implement in burst",("close burst",5)),
                             Effect(["You infuse the target with arcane energy.  Choose a damage type: acid, cold, fire, force, lightning, or thunder.  The target deals ",MOD("int")," extra damage of this type until the end of the encounter.  Until the end of the encounter, whenever the target scores a critical hit with the weapon, the target of the attack gains 10 ongoing damage of the type you chose (save ends)."])],"artificer","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Persistent Spheres",["arcane","weapon","zone"],"daily","standard",
                            [Target("one creature"),Atk([INTMOD],"AC",damage([3,10],[INTMOD]),["melee"]),
                             Hit("If the target doesn't move at least 2 squares during its turn, it takes 10 damage at the end of its turn (save ends)."),
                             Miss("Half damage, and if the target doesn't move at least 2 squares during its turn, it takes 5 damage at the end of its turn (save ends)"),
                             Effect("The attack creates a zone of painful motes in a burst 2 centered on the target.  The zone lasts until the target saves against this power.  When the target moves, the zone moves with it, remaining centered on it.  Any enemy that starts its turn within the zone takes 5 damage, and it grants combat advantage while within the zone.")],"paragon","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","artificer"))
,"clockwork engineer":feat([ft("feat",[
        feat([ft("paragonname","clockwork engineer")]),
                feat([],"Coordinated Action","When spending AP for an extra action, gain 2 minor actions which you can only use to command your summoned creatures",CHECK("level",11)),
                feat([],"Durable Artifice","Creatures you summon with artificer / clockwork engineer powers have a +2 power bonus to all defenses",CHECK("level",11)),
                feat([],"Superior Minions","Creatures you summon with artificer / clockwork engineer powers have a +2 bonus to speed and a +1 bonus to attack rolls",CHECK("level",16)),
                feat([Power("Clockwork Spiders",["arcane","implement","zone"],"encounter","standard",
                            [Effect("The burst creates a zone of miniature clockwork soldiers.  The zone lasts until the end of your next turn.  The zone is difficult terrain, and any enemy that starts its turn within the zone is subject to an attack.",("area burst",2,10)),
                             Atk([INTMOD],"reflex",damage([1,8],[INTMOD])),
                             Hit("The target is slowed until the end of its next turn.")],"artificer","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Aid Artifice",["arcane","healing"],"encounter","immediate interrupt",
                            [Trigger("A creature you summoned with an artificer or clockwork engineer power takes damage."),
                             Target("the triggering summoned creature",("close burst",10)),
                             Effect(["You spend a healing surge, and the target regains 2d6 + ",MOD("surge")," hit points."])],"artificer","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Clockwork Companion",["arcane","implement","summoning"],"daily","minor",
                            [Effect("You summon a Small clockwork companion in an unoccupied square within range. The clockwork companion has speed 7 and ignores difficult terrain. It has a +4 bonus to AC and to Reflex. When you or any ally starts your turn adjacent to the clockwork companion, that character gains 10 temporary hit points. You can give the clockwork companion the following special commands."),
                             Other("Minor Action:"),
                             Target("one creature",("melee",1)),Atk([INTMOD,2],"AC",damage([2,10],[INTMOD])),
                             Hit("The target is marked by the clockwork companion until the end of your next turn.  If the target is already marked, the companion can deal 1d8 extra damage instead of marking it."),
                             Other("Opportunity Attack:"),
                             Target("one creature",("melee",1)),Atk([INTMOD,2],"AC",damage([2,10],[INTMOD])),
                             Hit("The target is marked by the clockwork companion until th eend of your next turn.  If the target is already marked, the companion can deal 1d8 extra damage instead of marking it.")],"paragon","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","artificer"))
,"self-forged":feat([ft("feat",[
        feat([ft("paragonname","self-forged")]),
                feat([],"Fortifying Action",["When you spend an AP to take an extra action, gain ",lambda x:x.statret("level")/2+5," temporary hit points"],CHECK("level",11)),
                feat([ft("proficiency",["battlefist"])],"Battlefist","Gain a Battlefist melee weapon",CHECK("level",11)),
                feat([],"Supporting Construction","Gain a +2 bonus to saving throws against ongoing damage",CHECK("level",12)),
                feat([],"More Metal Than Flesh","You can attach and embed components as if you were a warforged",CHECK("level",16)),
                feat([],"Added Resilience","Whenever you make a death saving throw, you can take the better of your die roll or 10",CHECK("level",16)),
                feat([Power("Battlefist Smash",["arcane","weapon"],"encounter","standard",
                            [Requirement("Your battlefist hand must be free."),
                             Target("One creature"),Atk([INTMOD],"AC",damage(3,[INTMOD]),["one-handed"]),
                             Hit(["Push the target ",MOD("con")," squares.  The target grants combat advantage to you and your allies until the start of your next turn."])],"artificer","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Self-Repair",["arcane","healing"],"daily","standard",
                            [Effect("You regain hit points equal to twice your healing surge value")],"artificer","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Flailing Gauntlet",["arcane","weapon"],"daily","standard",
                            [Requirement("Your battlefist hand must be free"),
                             Target("one creature",("melee",2)),Atk([INTMOD],"fortitude",damage(4,[INTMOD]),["one-handed"]),
                             Hit("You knock the target prone"),
                             Miss(),
                             Effect("Your battlefist gains the reach weapon property until the end of the encounter.")],"paragon","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x: x.check("checkclass","artificer") and not (x.check("checkrace","warforged")))
###Avenger Paragons###
,"hammer of judgement":feat([ft("feat",[
        feat([ft("paragonname","hammer of judgement")]),
                feat([],"Avalanch Action",["When spending AP to attack, push each hit target ",INTMOD," squares."],CHECK("level",11)),
                feat([],"Bone Crusher","Whenever you hit a creature with a daily power it takes a -2 penalty to AC",CHECK("level",11)),
                feat([],"Bloodthirsty Hammer","Whenever you force move a blooded creature with a power, move it an extra 2 squares",CHECK("level",16)),
                feat([Power("Thunder Hammer",["divine","thunder","weapon"],"encounter","standard",
                            [Target("each enemy in burst",("close burst",3)),Atk([WISMOD],"fortitude",damage(2,[WISMOD]),[]),
                             Hit("You either knock the target prone or push it 2 squares."),
                             Special(["If you are wielding a hammer, you can instead push the target ",lambda x:x.mod("int")+1," squares."])],"avenger","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Resolve of Steel",["divine"],"encounter","minor",
                            [Effect("You gain resist 10 to all damage until the end of your next turn.")],"avenger","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Hammer of the Final Pronouncement",["divine","weapon"],"daily","standard",
                            [Target("one creature"),Atk([WISMOD],"AC",damage(4,[WISMOD]),["melee"]),
                             Hit("You push the target 3 squares, and it is immobilized (save ends)."),
                             Miss("Half damage.  You push the target 3 squares, and it is immobilized until the end of your next turn."),
                             Special(["If you are wileding a hammer, you can instead push the target ",lambda x:3+x.mod("int")," squares."])],"avenger","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","avenger"))
,"oathsworn":feat([ft("feat",[
        feat([ft("paragonname","oathsworn")]),
                feat([],"Blood Oath","You gain a +1 bonus to all defenses against your Oath of Enmity target",CHECK("level",11)),
                feat([],"Sworn Action","When you spend an AP to attack, use the better of two attack rolls for each target",CHECK("level",11)),
                feat([],"Enduring Oath","When your Oath of Enmity target drops to 0 hp, you can spend a healing surge as a free action",CHECK("level",16)),
                feat([Power("Oath of Weakness",["divine","weapon"],"encounter","standard",
                            [Target("your oath of enmity target"),Atk([WISMOD],"AC",damage(2,[WISMOD]),["melee"]),
                             Hit("The target is weakened until the end of your next turn")],"avenger","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Sworn Crusade",["divine"],"daily","minor",
                            [Target("each ally in burst",("close burst",5)),Effect("Until the end of your next turn, each target makes two attack rolls and uses the result he or she prefers when making a melee attack against your Oath of Enmity target.")],"avenger","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Oath Bond",["divine","weapon"],"daily","standard",
                            [Target("your oath of enmity target"),Atk([WISMOD],"AC",damage(3,[WISMOD]),["melee"]),
                             Effect("The target gains vulnerable 5 to your attacks (save ends).")],"avenger","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","avenger") and x.check("power","oath of enmity"))
,"unveiled visage":feat([ft("feat",[
        feat([ft("paragonname","unveiled visage")]),
                feat([],"Unveiled Action","When you spend an AP for an extra action, gain an extra use of Channel Divinity",CHECK("level",11)),
                feat([],"Soaring Charge","Can fly in a charge, +2 defenses against opportunity attacks during a charge",CHECK("level",11)),
                feat([],"Bloodied Might","The first time you are bloodied in an encounter, regain the use of Radiant Visage",CHECK("level",16)),
                feat([Power("Radiant Visage",["divine","implement","radiant"],"encounter","standard",
                            [Target("each enemy in blast",("close blast",5)),Atk([WISMOD],"reflex",damage([3,6],[WISMOD]))],"avenger","encounter",11)],"","",
                            CHECK("level",11)),
                feat([Power("Divine Vigilance",["divine"],"encounter","minor",
                            [Effect("You shift your speed.  You don't grant combat advantage to any enemy until the end of your next turn.")],"avenger","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Divine Aspect",["divine","implement","polymorph","radiant"],"daily","standard",
                            [Target("each enemy in burst",("close burst",1)),Atk([WISMOD],"reflex",damage([5,6],[WISMOD])),
                             Effect("Until the end of the encounter, you gain a +2 power bonus to AC.  In addition, you gain a fly speed equal to your speed, and you can hover.")],"avenger","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","avenger"))
,"zealous assassin":feat([ft("feat",[
        feat([ft("paragonname","zealous assassin")]),
                feat([],"Divine Shroud Action","When you spend an AP for an extra action, gain concealment and teleport 3 squares before or after",CHECK("level",11)),
                feat([],"Finishing Technique","When you hit a bloodied target with combat advantage deal an extra 1d6 damage",CHECK("level",11)),
                feat([],"Zealot's Veil","When you charge, if you succeed a stealth against the target's perception you gain combat advantage",CHECK("level",16)),
                feat([Power("Strike from Empty Air",["divine","teleportation","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([WISMOD],"AC",damage(3,[WISMOD]),["melee"]),
                             Hit("If you have combat advantage against the target, deal 1[W] extra damage"),
                             Effect("Before or after the attack, you teleport 2 squares.")],"avenger","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Avenging Shadow",["divine"],"encounter","minor",
                            [Target("one enemy in burst",("close burst",10)),Effect("You become invisible to the target until the end of your next turn.  If the target is your Oath of Enmity target, you become invisible to it (Save ends).")],"avenger","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Blade of the Zealot",["divine","radiant","weapon"],"daily","standard",
                            [Target("one creature"),Atk([WISMOD],"reflex",damage(4,[WISMOD]),["melee"]),
                             Hit("The target takes 10 radiant damage and grants combat advantage to you (save ends)."),
                             Miss("Half damage.  The target takes onging 5 radiant damage and grants combat advantage to you (save ends).")],"avenger","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","avenger") and x.check("training","stealth"))
###Barbarian Paragons###
,"bear warrior":feat([ft("feat",[
        feat([ft("paragonname","bear warrior")]),
                feat([],"Bear's Toughness","When you spend an AP to take an extra action, you may spend a healing surge",CHECK("level",11)),
                feat([],"Bear Form","While raging, gain +1 AC and you can spend your second wind as a free action",CHECK("level",11)),
                feat([],"Wild Push",["When you score a critical hit with a melee attack in rage, push the target ",STRMOD," squares"],CHECK("level",16)),
                feat([Power("Mauling Bear",["primal","weapon"],"encounter","standard",
                            [Target("One creature"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("You knock the target prone."),
                             Effect("Until the end of your next turn, if you are adjacent to the target when it stands up, you can make a melee basic attack against it as an immediate reaction.")],"barbarian","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Bestial Vigor",["primal"],"daily","minor",
                            [Effect("You gain temporary hit points equal to your healing surge value and can make a saving throw against each effect on you that a save can end.")],"barbarian","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Rampaging Bear",["primal","rage","weapon"],"daily","standard",
                            [Target("One creature"),
                             Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                             Hit("You push the target 1 square and knock it prone."),
                             Effect(["You shift ",MOD("str")," squares and then make a secondary attack."]),
                             Target("One creature other than the primary target"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("You push the secondary target 1 square and knock it prone."),
                             Effect(["You shift ",MOD("str")," squares. You then enter the bear warrior's rage. Until the rage ends, you gain regeneration 5, and whenever you are pulled, pushed, or slid, you can reduce the distance of the forced movement by 1 square."])],"barbarian","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","barbarian"))
,"fearbringer thane":feat([ft("feat",[
        feat([ft("paragonname","fearbringer thane")]),
                feat([],"Staggering Fury","When you spend an AP to make a melee attack while raging, enemies take a -2 to attack rolls until end of your next turn",CHECK("level",11)),
                feat([],"Inspire Ferocity","While you are raging, allies in 5 squares gain +2 to damage rolls with melee attacks",CHECK("level",11)),
                feat([],"Dominating Presence","After you critically hit a target, allies gain +2 to attack that target until end of your next turn",CHECK("level",16)),
                feat([Power("Screaming Hawk Strike",["fear","primal","weapon"],"encounter","standard",
                            [Target("One creature"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("The target takes a -2 penalty to ac until the end of your next turn."),
                             Special("If you use this power while you are raging, roll a d20. On a 10 or higher, you retain the use of this power.")],"barbarian","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Fearsome Presence",["primal","stance"],"daily","minor",
                            [Effect("Until the stance ends, you gain a +2 bonus to all defenses.")],"barbarian","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Tide Of Battle",["healing","primal","weapon"],"daily","standard",
                            [Target("One, two, or three creatures"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Miss("Half damage."),
                             Effect("An ally within 5 squares of you can spend a healing surge.")],"barbarian","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","barbarian"))
,"frenzied berserker":feat([ft("feat",[
        feat([ft("paragonname","frenzied berserker")]),
                feat([],"Frenzied Blood","When you spend an AP to make a melee attack, a missed attack that normally deals no damage deals half damage instead",CHECK("level",11)),
                feat([],"Warpath","+2 extra damage with melee attacks while raging; must attack adjacent enemies while raging or get stunned",CHECK("level",11)),
                feat([],"Unfeeling Rage","Gain resist 5 to all damage while bloodied and raging",CHECK("level",16)),
                feat([Power("Persistent Frenzy",["primal","weapon"],"encounter","standard",
                            [Target("Each creature in burst you can see",("close burst",1)),
                             Atk([STRMOD],"AC",damage(1,[STRMOD]),[]),
                             Special("If you use this power while you are raging, roll a d20. On a 10 or higher, you retain the use of this power.")],"barbarian","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Deathless Frenzy",["primal"],"daily","immediate interrupt",
                            [Trigger("You drop to 0 hit points or fewer and don't die"),
                             Effect("Until you regain hit points, you are dying but don't fall unconscious because of that condition. If you fail a death saving throw, you fall unconscious, and this effect ends.")],"barbarian","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Final Confrontation",["primal","weapon"],"daily","standard",
                            [Target("One creature"),
                             Effect("Before the attack, if the target is marked, that condition ends on it. It can then make a melee basic attack against you as a free action."),
                             Atk([STRMOD],"AC",damage(7,[STRMOD]),["melee"]),
                             Miss("Half damage."),
                             Effect("After the attack, you can allow the target to make a melee basic attack against you as a free action. If the target makes that attack, you can make a melee basic attack against it as a free action. You can repeat this effect until the target chooses not to make the attack.")],"barbarian","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","barbarian"))
,"wildrunner":feat([ft("feat",[
        feat([ft("paragonname","wildrunner")]),
                feat([],"Hunter's Fury",["When you spend an AP to make an attack, you can shift ",STRMOD," squares"],CHECK("level",11)),
                feat([ft("speed",["",1])],"Wildrunner's Swiftness","You gain a +1 bonus to your speed, or +2 while raging",CHECK("level",11)),
                feat([],"Wild Resilience","While you are raging, you gain a +2 bonus to saving throws",CHECK("level",16)),
                feat([Power("Shifting Wilds Strike",["primal","weapon"],"encounter","standard",
                            [Target("One creature"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("You shift 3 squares."),
                             Special("If you use this power while you are raging, roll a d20. On a 10 or higher, you retain the use of this power.")],"barbarian","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Press The Kill",["primal"],"encounter","free",
                            [Trigger("You reduce an enemy to 0 hit points"),
                             Effect(["You shift a ",MOD("str")," squares."])],"barbarian","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Wildrunner'S Rage",["primal","rage","weapon"],"daily","standard",
                            [Target("One creature"),
                             Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                             Hit("The primary target is immobilized until the end of your next turn."),
                             Miss("Half damage."),
                             Effect(["You shift ",MOD("str")," squares and then make a secondary attack."]),
                             Target("One creature other than the primary target"),
                             Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("The secondary target is immobilized until the end of your next turn."),
                             Miss("Half damage."),
                             Effect("You enter the wildrunner's rage. Until the rage ends, you gain a +2 bonus to AC and Reflex, and you ignore difficult terrain. In addition, you can shift 2 squares as a move action.")],"barbarian","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","barbarian") and x.check("training","nature"))
,"winter fury":feat([ft("feat",[
        feat([ft("paragonname","winter fury")]),
                feat([],"Surging Ice","When you spend an AP to make an attack, the first target hit and each enemy adjacent are immobilized until end of your next turn",CHECK("level",11)),
                feat([],"Ice Heart Reaper","Gain +1 to attack and +2 to damage rolls against immobilized targets",CHECK("level",11)),
                feat([],"Frost Reaver","You gain resist 10 cold.  whenever you deal damage that has no type, you can make it cold damage",CHECK("level",16)),
                feat([Power("Clutch of Winter",["cold","primal", "weapon"],"encounter","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD])),
                             Hit("The target is immobilized until the end of your next turn")],"barbarian","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Armor of Glaciers",["primal"],"daily","minor",
                            [Effect("You gain resist 20 to all damage until the end of the encounter.  Whenever this resistance reduces damage, the resistance decreases by 5, and it ends when it reaches 0.  If you take fire damage, the resistance ends after reducing that damage.")],"barbarian","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("World's End Rage",["cold","primal","rage","weapon"],"daily","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(4,[STRMOD])),
                             Hit("The target is restrained (save ends)."),
                             Miss(),
                             Effect("You enter the rage of the world's end.  Until the rage ends, when you hit any enemy with an at-will attack power, that enemy is immobilized until the end of your next turn.")],"barbarian","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","barbarian"))
###Bard Paragons###
,"student of the seven":feat([ft("feat",[
        feat([ft("paragonname","student of the seven")]),
                feat([],"Daily Mastery","After an extended rest, can replace a multiclass daily attack power with another daily attack power of same or lower level",CHECK("level",11)),
                feat([],"Versatile Action","When you spend an AP for an extra action, regain use of a multiclass encounter power",CHECK("level",11)),
                feat([],"Compensatory Insight",["+",INTMOD," damage with multiclass attack powers"],CHECK("level",16)),
                feat([Power("Anyspell",["arcane","implement"],"encounter","standard",
                            [Target("One creature in burst",("close burst",5)),
                             Atk([CHAMOD],"fortitude, reflex, or will (choose one)",damage([3,8],[CHAMOD])),
                             Effect("Until the end of your next turn, one ally in the burst gains a +2 power bonus to all defenses or a +1 power bonus to attack rolls.")],"bard","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Versatile Glamor",["arcane"],"daily","minor",
                            [Target("You or one ally",("ranged",5)),
                             Effect("The target gains one of the following benefits until the end of the encounter:"),
                             Line("* +2 power bonus to speed"),
                             Line("* +2 power bonus to attack rolls and damage rolls with opportunity attacks"),
                             Line("* +4 bonus, instead of +2, to attack rolls with combat advantage"),
                             Line("* Concealment"),
                             Line("* Resist 10 to a damage type of your choice")],"bard","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Voice of the Seven",["arcane","implement"],"daily","standard",
                            [Target("One creature",("ranged",5)),
                             Atk([CHAMOD],"fortitude, reflex, or will (choose one)",damage([3,10],[CHAMOD])),
                             Hit("Either the target is dazed (save ends), or you push the target 3 squares and it is immobilized (save ends)."),
                             Miss("Half damage, and the target is either dazed or immobilized until the end of your next turn.")],"bard","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","bard") and len(x.statret("checkclass")>1))
,"summer rhymer":feat([ft("feat",[
        feat([ft("paragonname","summer rhymer")]),
                feat([],"Feypath","When you spend AP for an extra action, teleport yourself or adjacent ally 5 squares as a free action",CHECK("level",11)),
                feat([],"The Queen's Grace",["When you heal with a bardic healing power, heal ",CHAMOD," extra HP"],CHECK("level",11)),
                feat([],"Judgment of the Summer Court","When enemy's missed attack triggers Virtue of Cunning, gain +2 to attack rolls against that enemy until end of your next turn",CHECK("level",16)),
                feat([Power("Song Of The Queen's Protection",["arcane","implement","psychic"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([CHAMOD],"will",damage([2,10],[CHAMOD])),
                             Hit("Any ally within 10 squares of you gains concealment until the end of his or her next turn.")],"bard","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Song Of Spiral Paths",["arcane","teleportation","zone"],"daily","minor",
                            [Effect("The burst creates a zone of fey magic that lasts until the end of your next turn. While within the zone, you and any ally can teleport 2 squares as a move action.",("close burst",10)),
                             Sustain()],"bard","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Song Of The High Court",["arcane","implement","radiant","zone"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",5)),
                             Atk([CHAMOD],"will",damage([3,10],[CHAMOD])),
                             Effect("The burst creates a zone of song that lasts until the end of your next turn. While within the zone, you and any ally gain resist 5 to all damage."),
                             Sustain()],"bard","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","bard") and x.check("feature","virtue of cunning"))
,"voice of thunder":feat([ft("feat",[
        feat([ft("paragonname","voice of thunder")]),
                feat([],"Voice of Thunder","When you spend AP for an extra action, increase close burst by 1 and close blast by 2 during that action",CHECK("level",11)),
                feat([],"Voice to Wake the Dead","As free action, grant a dying ally in 10 squares a +2 bonus to death saving throws",CHECK("level",11)),
                feat([ft("thunderdamage",["",2])],"Booming Words","+2 bonus to damage rolls when using a thunder power",CHECK("level",16)),
                feat([Power("Rolling Echo",["arcane","implement","thunder"],"encounter","standard",
                            [Target("Each enemy in burst",("close burst",2)),
                             Atk([CHAMOD],"fortitude",damage([2,6],[CHAMOD])),
                             Hit("You push the target 1 square. before you take any actions during your next turn, you can repeat the attack as a free action.")],"bard","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Doom Echo",["arcane"],"daily","minor",
                            [Effect("You regain the use of a bard encounter attack power that has the thunder keyword and that you have used during this encounter.")],"bard","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Song Of Thunder",["arcane","implement","thunder"],"daily","standard",
                            [Target("Each enemy in blast",("close blast",5)),
                             Atk([CHAMOD],"fortitude",damage([3,6],[CHAMOD])),
                             Hit("You knock the target prone."),
                             Miss(),
                             Effect("At the start of the next turn of each ally in the blast, the ally deals 5 thunder damage to each enemy within 2 squares of him or her.")],"bard","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","bard"))
,"war chanter":feat([ft("feat",[
        feat([ft("paragonname","war chanter")]),
                feat([],"Inspire by Example",["When you spend an AP for an extra action, allies in 5 squares gain +",CONMOD," to attack and damage until end of your next turn"],CHECK("level",11)),
                feat([],"Inspire by Word",["Gain temp HP from Virtue of Valor when ally does; gain ",lambda x:raising(3,20)(x)+2+x.mod("con")," temporary HP when you bloody or drop an enemy"],CHECK("level",11)),
                feat([],"Inspire by Deed","You can spend up to 2 action points during an encounter",CHECK("level",16)),
                feat([Power("Victorious Smite",["arcane","weapon"],"encounter","standard",
                            [Target("One creature"),
                             Atk([CHAMOD],"AC",damage(1,[CHAMOD]),["melee"]),
                             Effect("As a free action, an ally within 5 squares of you can shift 3 squares and make a basic attack against the target with a bonus to the attack roll and the damage roll equal to your Constitution modifier.")],"bard","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Battle Chant",["arcane"],"encounter","minor",
                            [Target("You and each ally in burst",("close burst",10)),
                             Effect("Choose an enemy in the burst. Each target gains a +2 power bonus to attack rolls against that enemy until the end of your next turn.")],"bard","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Visions Of Victory",["arcane","weapon"],"daily","standard",
                            [Target("One creature"),
                             Atk([CHAMOD],"AC",damage(1,[CHAMOD]),["melee"]),
                             Hit("As a free action, an ally of yours adjacent to the target can use an encounter melee attack power against the target, hitting it automatically."),
                             Miss("As a free action, an ally of yours adjacent to the target can use an at-will melee attack power against the target, hitting it automatically.")],"bard","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","bard") and x.check("feature","virtue of valor"))
###Battlemind Paragons###
,"eternal blade":feat([ft("feat",[
        feat([ft("paragonname","eternal blade")]),
                feat([Power("Blade Guide",["augmentable","psionic"],"encounter","minor",
                            [Target("The enemy nearest to you in burst",("close burst",10)),
                             Effect("Until the end of the encounter, you gain a +2 bonus to opportunity attack rolls against the target, and it grants combat advantage to you while you're the only creature adjacent to it."),
                             Augment(1),
                             Special("If the target drops to 0 hit points during this encounter, you regain the use of this power.")],"Eternal Blade","feature")],"","",CHECK("level",11)),
                feat([],"Guided Action","When you spend an AP to take an extra action, you can reroll your next attack roll that misses before the end of your turn.",CHECK("level",11)),
                feat([ft("psps",("",2))],"Paragon Power Points","You gain 2 additional power points.",CHECK("level",11)),
                feat([],"Eternal Warrior","When you drop to 0 hit points or fewer, the dying condition neither causes you to fall unconscious or make death saving throws until the end of your next turn",CHECK("level",16)),
                feat([Power("Eternal Vigilance",["augmentable","psionic","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CONMOD],"ac",damage(1,[CONMOD])),
                             Hit("Until the end of your next turn, the target provokes opportunity attacks from you whenever it shifts."),
                             Augment(2),
                             Hit("+1[W] damage.  Until the end of your next turn, the target provokes opportunity attacks from you and your allies whenever it shifts or makes close attacks.")],"battlemind","utility",12)],"","",
                            CHECK("level",11)),
                feat([Power("Blade Guide's Counsel",["psionic"],"daily","standard",
                            [Effect("You gain training in an untrained skill of your choice.  The training lasts until your next short rest.")],"battlemind","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Guided Aggression",["psionic","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CONMOD],"AC",damage(3,[CONMOD]),["melee"]),
                             Hit("You knock the target prone."),
                             Miss(),
                             Effect("Until the end of the encounter, you can use Eternal Vigilance against the target as an at-will power.  In addition, you regain 2 power points.")],"battlemind","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","battlemind"))
,"iron guardian":feat([ft("feat",[
        feat([ft("paragonname","iron guardian")]),
                feat([],"Indomitable Iron","When you spend an AP for an extra action, gain a +4 bonus to AC and damage rolls until end of your next turn.",CHECK("level",11)),
                feat([],"Iron Control","When any enemy pulls or pushes you, you can use a free action to slide that enemy 2 squares after the forced movement.",CHECK("level",11)),
                feat([ft("psps",("",2))],"Paragon Power Points","You gain 2 additional power points.",CHECK("level",11)),
                feat([],"Impenetrable Iron","Whenever a crit is scored against you, roll a d20.  On a roll of 10+, the crit is a normal hit instead",CHECK("level",16)),
                feat([Power("Guardian's Might",["augmentable","psionic","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CONMOD],"ac",damage(1,[CONMOD,WISMOD])),
                             Hit("You knock the target prone.  You then shift 2 squares to a square adjacent to the target."),
                             Effect("You gain a +2 power bonus to AC until the end of your next turn."),
                             Augment(2),
                             Target("one or two creatures")],"battlemind","utility",12)],"","",
                            CHECK("level",11)),
                feat([Power("Iron Defense",["psionic"],"at-will","standard",
                            [Effect("Until the end of your next turn, roll a d20 whenever you take damage.  On a 10 or higher, the damage is reduced to 0.  Otherwise, the damage is halved.")],"battlemind","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Aspect of the Iron Guardian",["polymorph","psionic","weapon"],"daily","standard",
                            [Target("each enemy in burst you can see",("close burst",1)),Atk([CONMOD],"AC",damage(3,[CONMOD]),[]),
                             Hit("You knock the target prone."),
                             Miss(),
                             Effect("You assume the aspect of the iron guardian until the end of the encounter.  While in this aspect, you can use the following augmentation with your battlemind at-will attack powers that are augmentable.  This augmentation is in addition to the effects that an at-will power might have; this augmentation doesn't supersede them."),
                             Augment(1),
                             Effect(["Until the start of your next turn, you gain a +2 power bonus to AC, and any enemy adjacent to you that falls prone or starts its turn prone takes ",MOD("con")," damage.  In addition, choose a singe creature hit by the at-will attack.  That creature takes ",MOD("wis")," extra damage."]),],"battlemind","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","battlemind"))
,"steel ego":feat([ft("feat",[
        feat([ft("paragonname","steel ego")]),
                feat([],"Demanding Action","When you spend an AP for an extra action, you can use Mind Spike as a free action until the end of your next turn",CHECK("level",11)),
                feat([],"Mind Smash",["Whenever you deal damage with your Mind Spike power, each enemy adjacent to the target takes ",MOD("cha")," psychic damage"],CHECK("level",11)),
                feat([ft("psps",("",2))],"Paragon Power Points","You gain 2 additional power points.",CHECK("level",11)),
                feat([],"Psionic Cascade","Whenever you score a critical hit, you regain 1 power point",CHECK("level",16)),
                feat([Power("Stinging Rebuke",["augmentable","psionic","weapon"],"encounter","immediate reaction",
                            [Trigger("An enemy adjacent to you attacks you or your ally with a melee or a close attack."),
                             Target("The triggering enemy",("melee",1)),
                             Atk([CONMOD],"AC",damage(2,[CONMOD]),"melee"),
                             Hit("You mark the target until the end of your next turn."),
                             Effect("Until the end of your next turn, the range of your mind spike power increases to 10, but it remains a melee power.  In addition, you can use your mind spike power as a free action once before the start of your next turn."),
                             Augment(2),
                             Hit("+1[W] damage, and you mark the target until the end of your next turn.")],"battlemind","utility",12)],"","",
                            CHECK("level",11)),
                feat([Power("Forceful Contempt",["psionic"],"encounter","immediate interrupt",
                            [Trigger("You are hit by an attack that targets a defense other than Fortitude"),
                             Effect("The attack instead targets your Fortitude, and you gain a +2 power bonus to Fortitude until the end of your next turn.")],"battlemind","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Fear and Loathing",["fear","psionic","psychic","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CONMOD],"fortitude",damage(4,[CONMOD]),["melee"]),
                             Hit("The target provokes opportunity attacks whenever it makes melee attacks (save ends)."),
                             Miss("Half damage, and the target provokes opportunity attacks whenever it makes melee attacks before the end of your next turn."),
                             Effect("Until the end of the encounter, you can use a free action to slide the target 1 square whenever it is hit by an opportunity attack.")],"battlemind","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","battlemind") and x.check("power","mind spike"))
,"zephyr blade":feat([ft("feat",[
        feat([ft("paragonname","zephyr blade")]),
                feat([],"Beguiling Advantage",["Your melee attacks against dazed, slowed, or stunned enemies deal ",MOD("cha"), "extra damage."],CHECK("level",11)),
feat([ft("psps",("",2))],"Paragon Power Points","You gain 2 additional power points.",CHECK("level",11)),
                feat([],"Zephyr Action","When you spend an AP for an extra action, you are insubstantial and gain phasing until the start of your next turn.",CHECK("level",11)),
                feat([ft("speed",("",2))],"Speed of the Wind","You gain a +2 bonus to speed, and the move granted by your speed of though power doesn't provoke opportunity attacks.",CHECK("level",16)),
                feat([Power("Knifing Wind",["augmentable","psionic","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([CONMOD],"ac",damage(1,[CONMOD])),
                             Hit("The target is dazed until the end of your next turn."),
                             Augment(2),
                             Hit("+1[W] damage, and the target is dazed until the end of your next turn.")],"battlemind","utility",12)],"","",
                            CHECK("level",11)),
                feat([Power("Mental Zephyr",["psionic"],"encounter","immediate reaction",
                            [Trigger("An enemy hits you"),
                             Effect("You shift 1 square.  Until the end of your next turn, you are insubstantial and phasing, and your attacks ignore the insubstantial quality.")],"battlemind","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Storm Dance Strike",["psionic","stance","teleportation","weapon"],"daily","standard",
                            [Target("one or two creatures"),Atk([CONMOD],"AC",damage(3,[CONMOD]),["melee"]),
                            Effect("If you attack two creatures with this power, you teleport 5 squares between the first and second attack."),
                            Line("You assume the storm dance stance.  Until the stance ends, you can make the following secondary attack."),
                            Other("Opportunity action"),
                            Trigger("An adjacent enemy marked by you moves without shifting"),
                            Target("The triggering enemy",("melee",1)),
                            Atk([CONMOD],"ac",damage(raising(1,20),[CONMOD]),["melee"]),
                            Hit("The secondary target is slowed until the end of your next turn.  In addition, you teleport 5 squares and then teleport the secondary target to a square adjacent to you.")],"battlemind","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","battlemind"))
###Cleric Paragons###
,"angelic avenger":feat([ft("feat",[
        feat([ft("paragonname","angelic avenger")]),
                feat([],"Angelic Action","When spending AP, Gain +4 bonus to attacks until start of your next turn.",CHECK("level",11)),
                feat([specialMenu(["lightning","radiant","thunder"],[
                feat([Power("Astral Wave",["divine","implement",z],"encounter","standard",
                            [Target("each enemy in burst",("close burst",8))
                             ,Atk([WISMOD],"will", damage([2,8],[WISMOD]))],"cleric","encounter",11)]) for z in ["lightning","radiant","thunder"]],["Deal ", lambda x:x.mod("cha")," "]," damage to bloodied enemies within 5 squares at the start of their turn")],"Astral Vibrance element","",CHECK("level",11)),
                feat([specialMenu([x for x in sorted(weaponKeyList("heavy blade"))],[feat([ft("proficiency",x)]) for x in sorted(weaponKeyList("heavy blade"))],"Proficient with ")],"Weapon Training","",CHECK("level",11)),
                feat([],"Blood and Radiance","Enemy that bloodies you grants combat advantage to you and your allies until end of its next turn",CHECK("level",16)),
                feat([Power("Angelic Presence",["divine","fear"],"daily","minor",
                            [Effect("Enemies gain a -2 penalty to attack rolls against you until the end of the encounter or until you are bloodied")],"cleric","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Angel Ascendant",["divine","weapon"],"daily","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(5,[STRMOD]),["melee"]),
                             Effect("You gain a fly speed of 6 (hovor) until the end of the encounter.")],"cleric","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","cleric"))

,"divine oracle":feat([ft("feat",[
        feat([ft("paragonname","divine oracle")]),
                feat([],"Foresight","You and each ally within 5 squares can't be surprised. Roll twice and choose when rolling initiative.",CHECK("level",11)),
                feat([],"Prophetic Action","When you spend an AP for an extra action, gain an extra move later in the encounter",CHECK("level",11)),
                feat([],"Terrifying Insight","Roll twice on attack against Will; if attack misses, you are dazed until end of next turn",CHECK("level",16)),
                feat([Power("Prophecy of Doom",["divine"],"encounter","standard",
                            [Target("one creature",("ranged",5)),
                             Effect("You or one ally who hits the target with an attack can choose to make the attack a critical hit.  This power lasts until the end of your next turn or until you or an ally uses it to make an attack a critical hit.")],"cleric","encounter",11)],"","",
                 CHECK("level",11)),
                feat([Power("Good Omens",["divine"],"daily","standard",
                            [Target("You and each ally in range",("ranged",10)),Effect("The targets gain a +5 power bonus to all d20 rolls until the end of your next turn, but the targets cannot score critical hits while this power is in effect.")],"cleric","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Hammer of Fate",["divine","implement"],"daily","standard",
                            [Target("one creature",("ranged",20)),Atk([WISMOD],"will",damage([5,10], [WISMOD])),
                             Miss("Rewind your turn to the moment before you made the attack, and you don't use this power.  Choose a different standard action this turn.  You can't use hammer of fate again until the next encounter.")],"cleric","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","cleric"))

,"radiant servant":feat([ft("feat",[
        feat([ft("paragonname","radiant servant")]),
                feat([],"Illuminating Attacks","Your powers with the radiant keyword can now score a critical hit with a natural roll of 19 or 20.",CHECK("level",11)),
                feat([],"Radiant Action",["When you spend AP for an extra action one enemy in 5 squares takes ",lambda x:x.statret("level")," ongoing radiant damage"],CHECK("level",11)),
                feat([],"Lasting Light","Any saving throws made by demons and devils to remove your effects recieve a -2 penalty",CHECK("level",16)),
                feat([Power("Solar Wrath",["divine", "implement", "radiant"],"encounter","standard",
                            [Target("each enemy in burst",("close burst",8)),Atk([WISMOD],"will",damage([3,8], [WISMOD])),
                             Special("If the target is either an undead creature or a demon, it is also stunned until the end of your next turn")],"cleric","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Healing Sun",["divine","healing","radiant","zone"],"daily","standard",
                            [Effect(["The burst creates a zone of divine light until the end of your next turn.  You and each ally who ends his or her turn within the zone regain ",lambda x:x.mod("cha")+5,"hit points.  A demon or an undead creature that enters the zone or starts its turn there takes 1d10+",lambda x:x.mod("cha")," radiant damage"],("close burst",2)),
                             Sustain("standard","The zone persists."),
                             Special("The zone ends at the end of your turn if you are bloodied.")],"cleric","utility",12)],"","",
                             CHECK("level",12)),
                feat([Power("Radiant Brilliance",["divine", "implement", "radiant"],"encounter","standard",
                            [Target("One creature",("ranged",20)),Atk([WISMOD],"reflex",damage([3,10], [WISMOD])),
                             Effect("At the start of your next turn, the target is the center of a radiant explosion:"),
                             Target("each enemy in burst",("burst",5)),Atk([WISMOD],"will",damage([3,10], [WISMOD])),
                             Miss("Half damage")],"cleric","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","cleric"))

,"warpriest":feat([ft("feat",[
        feat([ft("paragonname","warpriest")]),
                feat([],"Extra Damage Action",["When you spend an AP for an extra action add ",lambda x:x.statret("level")/2," to the damage from standard action attacks this turn"],CHECK("level",11)),
                feat([],"Warpriest's Strategy","1/encounter, you can call for a reroll if you or ajacent ally rolls a 1 on melee or close attack",CHECK("level",11)),
                feat([ft("ac",("",lambda x:"heavy" in x.statret("armortype")))],"Warpriest's Training","+1 bonus to AC when wearing heavy armor",CHECK("level",11)),
                feat([],"Warpriest's Challenge","Mark enemies with at-will melee attacks; attack when they shift or attack other creatures",CHECK("level",16)),
                feat([Power("Battle Cry",["divine", "healing", "weapon"],"encounter","standard",
                            [Target("each adjacent enemy",("close burst",1)),Atk([WISMOD],"fortitude",damage(2,[WISMOD]),[]),
                             Effect("You and each bloodied ally within 10 squares of you can spend a healing surge"),],"cleric","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Battle Favor",["divine","healing"],"daily","standard",
                            [Trigger("You roll a natural 20 while making a melee attack"),
                             Effect("Regain hit points as if you had spent two healing surges, or recover one daily power you have already used.  Once you use this power, you cannot recover it except by taking an extended rest."),],"cleric","utility",12)],"","",
                             CHECK("level",12)),
                feat([Power("Battle Pyres",["divine", "implement", "radiant"],"daily","standard",
                            [Target("each enemy in burst",("close burst",5)),Atk([WISMOD],"will",damage([2,8], [WISMOD])),
                             Hit("Target takes ongoing 5 damage (save ends).  Make a secondary attack"),
                             Other("Secondary target: One creature taking ongoing radiant damage within 5 squares of you"),
                             Target("one creature taking ongoing radiant damage",("burst",5)),Atk([WISMOD],"reflex",damage([5,10], [WISMOD])),
                             Sustain("standard","You can make the secondary attack in subsequent rounds as long as at least one of your primary targets is taking ongoing radiant damage.")],"cleric","daily",20)],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","cleric"))
###Druid Paragons###
,"blood moon stalker":feat([ft("feat",[
        feat([ft("paragonname","blood moon stalker")]),
                feat([],"Blood Moon Action","When you spend an AP for an extra action in beast form, take a melee basic attack as a free action",CHECK("level",11)),
                feat([],"Blood Moon Hunger","When you reduce an enemy to 0 hp for fewer with a melee or beast form attack, you can second wind as a free action",CHECK("level",11)),
                feat([],"Frenzied Claws","While in beast form, you can critical hit on a 19-20",CHECK("level",16)),
                feat([Power("Blood Moon Frenzy",["beast form","implement","primal"],"encounter","standard",
          [Target("Each enemy in burst you can see",("close burst",1)),
          Atk([WISMOD],"reflex",damage([2,6],[WISMOD])),
          Hit("The attack deals 1d6 extra damage against a target that is already bloodied.")],"druid","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Feral Accuracy",["beast form","primal"],"daily","minor",
                            [Effect("Until the end of your next turn, you can reroll any melee or close attack that misses, and you must use the second roll.")],"druid","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Nature's Grave",["beast form","implement","primal"],"daily","standard",
                            [Requirement("You or the target must be bloodied.",("melee","touch")),
                             Target("One creature",("melee","touch")),
                             Atk([WISMOD],"reflex",damage([6,10],[WISMOD])),
                             Miss("Half damage.")],"druid","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","druid") and x.check("power","wild shape"))
,"guardian of the living gate":feat([ft("feat",[
        feat([ft("paragonname","guardian of the living gate")]),
                feat([],"Guardian Action","When you spend an AP for an extra action, you or ally in 5 squares can make a save with a +5 bonus",CHECK("level",11)),
                feat([],"Entwining Evocation","With area attacks, gain combat advantage against each target with no creatures adjacent to it",CHECK("level",11)),
                feat([],"Enduring Spirit","1/round, when you fail a saving throw, one ally in 5 squares can make a saving throw",CHECK("level",16)),
                feat([Power("First Ward Of The Living Gate",["implement","primal"],"encounter","standard",
                            [Target("One creature"),Atk([WISMOD],"reflex",damage([3,10],[WISMOD])),
                             Hit("Until the end of your next turn, you gain a +2 bonus to the attack rolls of any primal attack powers you use against the target and any enemy within 5 squares of it.")],"druid","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Second Ward Of The Living Gate",["primal"],"daily","minor",
                            [Target("One enemy in burst",("close burst",5)),
                             Effect("Until the end of the encounter, you and your allies gain a +4 bonus to saving throws against effects caused by the target.")],"druid","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Third Ward Of The Living Gate",["implement","primal"],"daily","standard",
                            [Target("One creature",("ranged",20)),
                             Atk([WISMOD],"will",damage([4,10],[WISMOD])),
                             Hit("Ongoing 10 damage (save ends). whenever the target takes the ongoing damage, it is knocked prone and each enemy within 5 squares of it takes 5 damage."),
                             Miss("Half damage, and ongoing 5 damage (save ends).")],"druid","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","druid"))
,"keeper of the hidden flame":feat([ft("feat",[
        feat([ft("paragonname","keeper of the hidden flame")]),
                feat([],"Keeper's Action","When you spend an AP for an extra action, you can reroll the next attack you make before the end of your next turn",CHECK("level",11)),
                feat([],"Fury of the Hidden Flame","+1 to ranged, area, and close attack rolls against the enemy nearest to you",CHECK("level",11)),
                feat([],"Leap to the Fray","Whenever an ally in 5 squares of you charges, you and each ally in 5 squares can shift 1 square as a free action",CHECK("level",16)),
                feat([Power("Summon The Beast",["implement","primal"],"encounter","standard",
                            [Target("One creature",("ranged",5)),
                             Atk([WISMOD],"will",None),
                             Hit("You pull the target 5 squares and knock it prone. In addition, the target is dazed until the end of your next turn.")],"druid","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Spark Of Fury",["primal"],"encounter","minor",
                            [Target("You and each ally in burst",("close burst",5)),
                             Effect("Until the end of your next turn, each target gains a +1 power bonus to attack rolls and a +2 power bonus to damage rolls.")],"druid","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Spirit Of The Beast",["implement","primal"],"daily","standard",
                            [Target("One creature",("ranged",20)),Atk([WISMOD],"will",None),
                             Hit("The target is overwhelmed by a beast spirit (save ends). While overwhelmed by the spirit, the target grants combat advantage, can make melee attacks only, and must target your ally nearest to it when it attacks. In addition, it must make any opportunity attack it can. The target cannot make a saving throw against this effect if the target has hit with a melee attack since the end of its last turn."),
                             Miss("The target grants combat advantage and must target your ally nearest to it when it attacks (save ends both). The target cannot make a saving throw against this effect if the target has hit with a melee attack since the end of its last turn.")],"druid","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","druid"))
,"sky hunter":feat([ft("feat",[
        feat([ft("paragonname","sky hunter")]),
                feat([],"Sky Hunter's Action","When you spend an AP for an action, you can move your speed before taking the action",CHECK("level",11)),
                feat([],"Master of Wings","+2 bonus to attack rolls against flying creatures",CHECK("level",11)),
                feat([],"Beast Senses","+5 power bonus to Perception checks until end of encounter whenever you use a beast form daily power",CHECK("level",16)),
                feat([Power("Blinding Talons",["beast form","implement","primal"],"encounter","standard",
                            [Effect("You assume the form of an eagle that is your size, fly twice your speed, and make the following melee touch attack at any point during the movement. You don't provoke an opportunity attack for moving away from the attack's target. After the attack, you return to your normal beast form."),
                             Target("One creature"),
                             Atk([WISMOD],"reflex",damage([1,10],[WISMOD])),
                             Hit("The target is blinded until the end of your next turn.")],"druid","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Soaring Falcon",["primal"],"daily","free",
                            [Other("Prerequisite:  You must have the wild shape power."),
                             Effect("Until the end of the encounter, you can use wild shape to assume the form of a Tiny falcon. In this form, you gain a fly speed equal to your speed. You also gain a +5 bonus to Perception checks and a +4 bonus to AC against opportunity attacks. You can't attack, pick up anything, or manipulate objects. Until this power ends, you can use wild shape to change among this form, another beast form, and your humanoid form.")],"druid","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Primal Eagle",["beast form","implement","primal","thunder"],"daily","standard",
                            [Effect("You assume the form of an eagle that is your size, fly your speed, and then make the following attack, which is a close burst 5. You then return to your normal beast form. Until the end of the encounter, while you are in beast form you can assume this eagle form and fly your speed as a move action. At the end of that action, you must land, and you return to your normal beast form."),
                             Target("Each enemy in burst"),
                             Atk([WISMOD],"fortitude",damage([4,6],[WISMOD])),
                             Hit("The target is slowed (save ends)."),
                             Miss("Half damage, and the target is slowed until the end of your next turn.")],"druid","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","druid") and x.check("power","wild shape"))
###Fighter Paragons###
,"avenging slayer":feat([ft("feat",[
        feat([ft("paragonname","avenging slayer")]),
                feat([],"Slayer's Action","When you spend an AP for extra action gain combat advantage against one marked enemy",CHECK("level",11)),
                feat([],"Bloodied Edge",["Gain a +",CHAMOD," bonus to damage rolls with combat advantage against bloodied enemies."],CHECK("level",11)),
                feat([],"Brutal Justice","Gain a +2 bonus to attack rolls after dropping marked target to 0 hit points",CHECK("level",16)),
                feat([ft("power",
                [Power("Comeupppance Strike",["martial","rattling","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("Make a second attack"),
                 Target("each bloodied enemy within 2 squares of the primary target"),Atk([STRMOD],"will",None,["melee"]),
                 Hit("The target takes a -2 penalty to all defenses until the end of your next turn.")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Looming Justice",["fear","martial","stance"],"daily","minor",
                [Effect("Until the stance ends, whenever an enemy marked by you makes an attack that doesn't include you as a target, you can slide the enemy 1 square as an immediate reaction.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Ruthless Outburst",["martial","rattling","weapon"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit("Ongoing 5 damage (save ends).  If the target was bloodied by this attack, the target takes a -2 penalty to attack rolls (save ends)."),
                 Miss("Half Damage, and no ongoing damage or penalty to attack rolls")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"dreadnought":feat([ft("feat",[
        feat([ft("paragonname","dreadnought")]),
                feat([],"Dreadnought Action","When you spend an AP to make an attack, gain resist 10 to all damage until start of next turn",CHECK("level",11)),
                feat([ft("hp",["",10])],"Unfailing Resources","+10 max HP.  As a minor action, take 10 damage to automatically succeed a save.",CHECK("level",11)),
                feat([],"Critical Hardening","When you critical hit with a weapon, gain resist 10 until end of next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Inexorable Advance",["invigorating","martial","weapon"],"encounter","standard",
                [Effect("You can shift 1 square before each attack"),
                 Target("one creature or two creatures, two attacks"),Atk([STRMOD],"AC",damage(1,[STRMOD,[["axe","hammer","mace"],CONMOD]]),["melee"])],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Blood Iron",["martial"],"daily","immediate reaction",
                [Trigger("You become bloodied"),
                 Effect("You gain resist 5 to all damage until the end of the encounter.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Line-Breaker Assault",["martial","reliable","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"fortitude",damage(3,[STRMOD]),["melee"]),
                 Hit("Slide the target 3 squares to an adjacent space.  The target is dazed (save ends)."),
                 Effect("You gain resist 5 to all damage until the start of your next turn. ")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"dread reaper":feat([ft("feat",[
        feat([ft("paragonname","dread reaper")]),
                feat([],"Reaper's Action",["When you spend an AP to attack with a 2-handed weapon, adjacent enemies take ",STRMOD," damage"],CHECK("level",11)),
                feat([],"Impending Slaughter","If your opporunity attack bloodies a marked enemy, you can knock the enemy prone",CHECK("level",11)),
                feat([],"Reaping Cleave",["Adjacent enemy takes ",STRMOD," damage on a successful melee attack.  All adjacent enemies do on successful cleave."],CHECK("level",16)),
                feat([ft("power",
                [Power("Reaping Lunge",["martial","weapon"],"encounter","standard",
                [Target("one creature",("melee","reach +1")),Atk([STRMOD],"AC",damage(2,[STRMOD,["two-handed",CONMOD]]),["melee"]),
                 Hit("Until the start of your next turn, if the target makes an attack that doesn't include you as a target, you can shift 1 square and make a melee basic attack against the target as an immediate interrupt."),
                 Special(["If you are wielding a two-handed weapon, the melee attack deals an extra ",CONMOD," damage."])],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Reaper's Warning",["martial"],"encounter","minor",
                [Target("each enemy in burst you can see",("close burst",2)),Effect("The target is marked until the end of the encounter, until you are knocked unconscious, or until another mark supersedes this one.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Blood Harvest",["martial","weapon"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit("The target takes ongoing 5 damage (save ends).  If the target moves on its turn, it cannot make a save against the ongoing damage."),
                 Special("If you are wielding a two-handed weapon, the target instead takes ongoing 10 damage (save ends)."),
                 Miss("Half damage, and no ongoing damage.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"dwarven defender":feat([ft("feat",[
        feat([ft("paragonname","dwarven defender")]),
                feat([],"Defensive Action","When you spend an AP for an extra action, gain +2 to AC and Fortitude until end of next turn",CHECK("level",11)),
                feat([],"Stalwart Defender","When adjacent to an ally, grant +1 AC to self and adjacent allies, adjacent allies reduce forced movement by 1",CHECK("level",11)),
                feat([],"Roots of the Earth","The Stand Your Ground racial trait now reduces the distace you are moved by 5 squares",CHECK("level",16)),
                feat([ft("power",
                [Power("Press Forward",["martial","weapon"],"encounter","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(1,[STRMOD,[["axe","hammer","pick"],CONMOD]]),["melee"]),
                 Hit("Slide the target 1 square.  You can then shift 1 square into the space the target occupied.")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Forge-Fire Heart",["martial"],"encounter","minor",
                [Effect("Until the end of your next turn, you gain a +4 power bonus to all defenses, and any ally adjacent to you gains a +2 power bonus to Will.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Keystone Collapse",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(4,[STRMOD,[["axe","hammer","pick"],CONMOD]]),["melee"]),
                 Hit("Push enemies adjacent to the target 1 square and knock them prone."),
                 Miss("Half damage, push enemies adjacent to the target 1 square.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","fighter") and x.check("checkrace","dwarf"))

,"halfling bounder":feat([ft("feat",[
        feat([ft("paragonname","halfling bounder")]),
                feat([],"Shifty Action",["You can spend an action point to shift ",DEXMOD," squares, instead of taking an extra action."],CHECK("level",11)),
                feat([],"Chance Retaliation","If enemy misses you as a result of Second Chance, make a melee basic attack against it as a free action",CHECK("level",11)),
                feat([],"Move the Battle","Whenever you hit with Combat Challenge, you can slide the target 1 square and then shift 1 square",CHECK("level",16)),
                feat([ft("power",
                [Power("Too Close for Comfort",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(1,[STRMOD]),["melee"]),
                 Hit("Until end of your next turn, if the target moves, you can move up to your speed as a free action, ending your movement adjacent to the target.")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Switching Leap",["martial"],"encounter","immediate interrupt",
                [Trigger("An adjacent ally is hit by a melee attack",("melee",1)),
                 Target("the triggering ally"),Effect("You slide the target 2 squares and can shift into the space the target occupied.  You become the target of the triggering attack.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Quicksilver Lunge",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"reflex",damage(4,[STRMOD]),["melee"]),
                 Miss("Half damage"),
                 Special("When charging, you can use this power in place of a melee basic attack.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","fighter") and x.check("checkrace","halfling"))

,"inner dragon":feat([ft("feat",[
        feat([ft("paragonname","inner dragon")]),
                feat([],"Breath Action","When you spend an AP for an extra action, use Dragon Breath as free action even if it is spent",CHECK("level",11)),
                feat([],"Dragonborn Fury","When you are bloodied, racial bonus to attack rolls is +2 instead of +1",CHECK("level",11)),
                feat([],"Eternal Breath",["Whenever you hit with Dragon Breath, the target takes ongoing 5 ",lambda x:x.statret("dragonbreathelement")," damage (save ends)"],CHECK("level",16)),
                feat([ft("power",
                [Power("Dragon Blast",["martial"],"encounter","immediate reaction",
                [Trigger("An enemy damages you"),
                 Target("each enemy in blast"),Atk([CONMOD,raising(2,10)],"reflex",damage([2,6],[CONMOD])),
                 Hit("The target is blinded until the ned of your next turn")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Ancestral Manifestation",["martial"],"daily","minor",
                [Requirement("You must not be bloodied"),
                 Effect(["Your hit points fall to your bloodied value, and you gain temporary hit points equal to the hit points you lost by using this power.  Until you have no temporary hit points, you gain resistance ",CONMOD," to all damage."])],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Dragonbreath Strike",["martial","stance"],"daily","minor",
                [Effect(["Until the stance ends, when you deal damage with a melee attack against an adjacent enemy, the attack deals ",CONMOD," extra ",lambda x:x.statret("dragonbreathelement")," damage."])],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","fighter") and x.check("checkrace","dragonborn"))

,"iron vanguard":feat([ft("feat",[
        feat([ft("paragonname","iron vanguard")]),
                feat([],"Enduring Warrior",["When you drop an enemy to 0 hit points or fewer, you regain ",lambda x:x.mod("con"), " hit points"],CHECK("level",11)),
                feat([],"Ferocious Reaction","Can spend an AP to take an action when dropped to 0; +4 to defenses when spending AP for an extra action",CHECK("level",11)),
                feat([],"Trample the Fallen",["Opponents take ",lambda x:x.mod("con")," when you push them or knock them prone"],CHECK("level",16)),
                feat([ft("power",
                [Power("Frontline Surge",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("Push the target 1 square.  You can shift into the square formerly occupied by the target.  If you do so, each ally within 2 squares of you can shift 1 square as well")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Inexorable Shift",["martial"],"encounter","move",
                [Effect("Shift into any adjacent square.  If a creature occupies a square into which you shift, you push that creature 1 square.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Indomitable Strength",["healing","martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(4,[STRMOD]),["melee"]),
                 Hit("Push the target 1 square.  and knock it prone.  In addition, the target is dazed until the end of your next turn"),
                 Miss("Half Damage"),
                 Effect("You can spend a healing surge")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"kensai":feat([ft("feat",[
        feat([ft("paragonname","kensai")]),
                feat([],"Kensai Control Action","You can spend an AP to reroll a d20 instead of taking an extra action",CHECK("level",11)),
                feat([specialMenu([x for x in sorted(weaponList.keys())],[feat([ft(x+"nameattack",("",1)),ft(x+"namedamage",("",lambda x: 4*x.statret("kensaimastery")))]) for x in sorted(weaponList.keys())],"+1 to attacks with ")],"Kensai Focus","",CHECK("level",11)),
                feat([ft("kensaimastery",("",1))],"Kensai Mastery","+4 damage with weapon chosen for Kensai Focus",CHECK("level",16)),
                feat([ft("power",
                [Power("Masterstroke",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD,2],"AC",damage(2,[STRMOD,2]),["melee"])],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Ultimate Parry",["martial"],"daily","immediate reaction",
                [Trigger("You take damage from an attack"),
                 Effect(["Reduce the damage by ",lambda x:x.statret("level")])],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Weaponsoul Dance",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit("The target is knocked prone and immobilized until the end of your next turn"),
                 Effect("You can shift 5 squares, then make a secondary attack"),
                 Target("one creature other than the primary target"),Atk([STRMOD,2],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("The target is knocked prone and immobilized until the end of your next turn"),
                 Effect("You can shift 5 squares, then make a tertiary attack"),
                 Target("one creature other than the primary and secondary targets"),Atk([STRMOD,3],"AC",damage(1,[STRMOD]),["melee"]),
                 Hit("The target is knocked prone and immobilized until the end of your next turn")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"knight protector":feat([ft("feat",[
        feat([ft("paragonname","knight protector")]),
                feat([],"Protector's Action","When you spend an AP for an extra action, one ally in 5 squares gains a +4 bonus to AC until end of your next turn",CHECK("level",11)),
                feat([],"Devoted Protector","When enemy marked by you attacks an ally adjacent to you, you can slide the ally 1 square as immediate interrupt",CHECK("level",11)),
                feat([],"Knight's Focus","Instead of Combat Challenge or opportunity attack, you can grant adjacent allies +2 AC until end of your next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Protector's Strike",["martial","weapon"],"encounter","standard",
                [Target("one creature marked by you"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit(["If the target attacked any of your allies since the end of your last turn, the attack deals ",WISMOD," extra damage, and the target is dazed until the end of your next turn."])],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Knightly Bulwark",["martial"],"encounter","minor",
                [Target("one ally in burst you can see",("close burst",5)),Effect("The target can shift into a square adjacent to you as a free action and gains a +2 power bonus to AC until the start of your next turn.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Blood Justice",["martial","weapon"],"daily","immediate reaction",
                [Trigger("An adjacent enemy bloodies an ally with a melee attack."),
                 Target("the triggering enemy"),Atk([STRMOD],"AC",damage(5,[STRMOD]),["melee"]),
                 Hit("Slide the target 1 square.  You can shift into the space it occupied."),
                 Miss("Half damage, and no slide."),
                 Effect("The ally gains a+2 power bonus to AC until the start of your next turn.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"pit fighter":feat([ft("feat",[
        feat([ft("paragonname","pit fighter")]),
                feat([ft("ac",("",lambda x:"heavy" in x.statret("armortype") or "light" in x.statret("armortype")))],"Armor Optimization","+1 AC when wearing any kind of armor",CHECK("level",11)),
                feat([],"Extra Damage Action",["When you spend an AP for an extra action add ",lambda x:x.statret("level")/2," to the damage from standard action attacks this turn"],CHECK("level",11)),
                feat([ft("damage",("",lambda x: 1+x.mod("wis")))],"Dirty Fighting",["+",lambda x:x.mod("wis")+1," damage with weapons"],CHECK("level",16)),
                feat([ft("power",
                [Power("All Bets Are Off",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("Make a secondary attack against the target"),
                 Target("one creature"),Atk([STRMOD],"AC",damage([1,6],[STRMOD]),["melee"]),
                 Hit("The target is dazed until the end of your next turn")],"fighter","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Deadly Payback",["martial"],"daily","immediate reaction",
                [Trigger("You take damage from an attack"),
                 Effect("Until the end of your next turn, you gain a +2 bonus to attack rolls and damage rolls against the enemy that damaged you")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Lion of Battle",["fear","martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(4,[STRMOD]),["melee"]),
                 Special("If the target was bloodied before the attack, it takes +2[W] damage"),
                 Miss("Half damage"),
                 Effect("If you reduce the target to 0 hit points or fewer, you can make a secondary attack"),
                 Target("each enemy within 5 squares of you"),Atk([STRMOD],"will",None,["melee"]),
                 Hit("The target moves its speed away from you")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"polearm master":feat([ft("feat",[
        feat([ft("paragonname","polearm master")]),
                feat([],"Lunging Action","You can spend an AP to increase the reach of your reach weapon by 1 until start of your next turn",CHECK("level",11)),
                feat([],"Forceful Reach","If you push, pull, or slide with a power using a reach weapon, increase force movement by 1",CHECK("level",11)),
                feat([],"Longarm Grasp","Make melee basic attack against enemy in 2 squares that shifts or makes an attack that doesn't include you",CHECK("level",16)),
                feat([ft("power",
                [Power("Leveraging Strike",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee","two-handed","reach"]),
                 Hit(["You slide the target ",WISMOD," squares."]),
                 Miss("Half damage, and no slide.")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Reaching Stance",["martial","stance","weapon"],"encounter","minor",
                [Requirement("You must be wielding a two-handed reach weapon."),
                 Effect("Until the stance ends, you can make opportunity attacks against enemies within your weapon's reach.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Polearm Sweep",["martial","weapon"],"daily","immediate reaction",
                [Target("each enemy in burst you can see",("close burst",2)),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee","two-handed","reach"]),
                 Miss("Half damage.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"ravager":feat([ft("feat",[
        feat([ft("paragonname","ravager")]),
                feat([],"Ravaging Action",["You can spend an AP to make a melee basic attack against each adjacent enemy, add ",CONMOD," to these damage rolls."],CHECK("level",11)),
                feat([],"Strive to Slay","Each time you reduce an enemy to 0, gain a +2 bonus to next melee attack roll before end of next turn",CHECK("level",11)),
                feat([],"Marauding Fury","Once per round, if you miss an attack while bloodied, make a melee basic attack against same target as free action",CHECK("level",16)),
                feat([ft("power",
                [Power("Driven Before You",["invigorating","martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("You push each enemy within 3 squares of you, other than the target, 1 square")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Blood-Soaked Fury",["healing","martial","stance"],"daily","immediate reaction",
                [Trigger("An enemy bloodies you with a melee attack."),
                 Effect(["Until the stance ends, you take a -2 penalty to all defences, but you gain a +2 power bonus to melee attack rolls.  Whenever you reduce an enemy to 0 hit points, you regain ",CONMOD," hit points."])],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Marked Savagery",["invigorating","martial","reliable","weapon"],"daily","immediate reaction",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("Ongoing 15 damage (save ends).  Until the target is not marked by you, it takes a -2 penalty to saving throws against the ongoing damage.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"shield adept":feat([ft("feat",[
        feat([ft("paragonname","shield adept")]),
                feat([],"Covering Action","When using a shield, you can spend an AP to gain superior cover vs. ranged and area attacks until end of next turn",CHECK("level",11)),
                feat([],"Shield Bearer's Payback","When adjacent enemy attacks an ally with a melee attack, gain a +2 cumulative bonus to next melee damage roll",CHECK("level",11)),
                feat([ft("fort",["",lambda x:x.modtotal("shield")])],"Shielded Stamina","While using a shield, you add its shield bonus to your Fortitude defense",CHECK("level",16)),
                feat([ft("power",
                [Power("Sudden Shield Bash",["martial"],"encounter","immediate interrupt",
                [Trigger("An adjacent enemy marked by you shifts or makes an attack that doesn't include you as a target",("melee",1)),
                 Requirement("You must be using a shield"),
                 Target("the triggering enemy"),Atk([STRMOD,raising(2,10)],"fortitude",None),
                 Hit("The target is stunned until the end of your next turn")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Shield Wall",["martial","stance"],"daily","minor",
                [Requirement("You must be using a shield"),
                 Effect("Until the stance ends, you and allies adjacent to you gain cover against range and area attacks.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Reverberating Shield",["martial"],"daily","immediate reaction",
                [Trigger("An enemy misses you or an ally with a melee attack",("melee",1)),
                 Requirement("You must be using a shield"),
                 Target("the triggering enemy"),Effect("The target is dazed and weakened (save ends both).")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"shock trooper":feat([ft("feat",[
        feat([ft("paragonname","shock trooper")]),
                feat([],"Footwork Action","When you spend an AP for an extra action, gain +2 AC and Reflex until end of next turn, and shift 1 square if missed in melee",CHECK("level",11)),
                feat([ft("off-handweaponsize",["",1])],"Deadly Soldier","When you wield an off-hand weapon, increase the weapon's damage die by one size",CHECK("level",11)),
                feat([],"Quicker Death",["1/round, gain a +",DEXMOD," bonus to a damage roll with combat advantage"],CHECK("level",16)),
                feat([ft("power",
                [Power("Shocking Twister",["martial"],"encounter","immediate interrupt",
                [Target("one creature"),Atk([STRMOD,2],"AC",damage(1,[STRMOD]),["melee","primary"]),
                 Hit("Make a secondary attack against the target"),
                 Target("one creature"),Atk([STRMOD,2],"AC",damage(1,[STRMOD]),["melee","offhand"]),
                 Hit("You can shift 1 square.  Make a tertiary attack against the target"),
                 Target("one creature"),Atk([STRMOD,2],"AC",damage(1,[STRMOD]),["melee"],["offhand","primary"]),
                 Hit("You can shift 1 square, and the target is dazed until the end of your next turn.")],"fighter","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Assault Footwork",["martial","stance"],"daily","minor",
                [Effect("Until the stance ends, once during each of your turns when you miss with a melee attack, you can either shift 1 square or gain a +1 power bonus to AC until the end of your next turn.")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Shocking Skewer",["martial"],"daily","immediate reaction",
                [Requirement("You must have a hand free"),
                 Target("one creature"),Atk([STRMOD,5],"fortitude",None,["melee","off-hand"]),
                 Hit("You grab the target.  Make a secondary attack against the target."),
                 Target("one creature"),Atk([STRMOD,5],"fortitude",damage(3,[STRMOD,DEXMOD]),["melee","off-hand"]),
                 Hit("The target is dazed (save ends)")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"swordmaster":feat([ft("feat",[
        feat([ft("paragonname","swordmaster")]),
                feat([],"Steel Defense Action","After spending AP for extra action gain +4 to AC and Reflex until start of next turn",CHECK("level",11)),
                feat([],"Steel Grace","Use Cleave, Tide of Iron, Sure Strike, or Reaping Strike on a charge with a non-polearm blade",CHECK("level",11)),
                feat([],"Steel Blitz","Regain encounter power on critical hit with light or heavy blade",CHECK("level",16)),
                feat([ft("power",
                [Power("Precision Cut",["martial","weapon"],"encounter","standard",
                [Special("This power can be used as an opportunity attack"),
                 Target("one creature"),Atk([STRMOD],"reflex",damage(3,[STRMOD]),["melee"])],"fighter","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Fantastic Flourish",["martial"],"encounter","minor",
                [Requirement("You make a successful melee attack with a light blade or heavy blade (not a polearm)"),
                 Target("One enemy other than the one you just hit",("ranged",5)),Effect("The target is marked until the end of your next turn")],"fighter","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Crescendo Sword",["martial","weapon"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"],["heavy blade","light blade","!polearm"]),
                 Effect("If you hit at least one of your enemies, you regain one daily attack power you have already used.  If you miss all enemies, you regain one encounter attack power you have already used.")],"fighter","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))

,"tiefling warfiend":feat([ft("feat",[
        feat([ft("paragonname","tiefling warfiend")]),
                feat([],"Infernal Action","When you spend an AP for an extra action, recover Infernal Wrath",CHECK("level",11)),
                feat([],"Hellfire Retribution",["Whenever a marked enemy makes an attack that doesn't include you, it takes ",lambda x:3+x.mod("con")," fire damage."],CHECK("level",11)),
                feat([],"Burning Opportunism",["Deal an extra ",lambda x:3+x.mod("con")," fire damage with Combat Challenge and opportunity attacks"],CHECK("level",16)),
                feat([ft("power",
                [Power("Hellfire Reprisal",["fire","martial","weapon"],"encounter","immediate interrupt",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit(["If the target has hit an ally with an attack during this encounter, the attack deals ",lambda x: x.mod("con")+3," fire damage."])],"paladin","encounter",11)])],"","",
                 CHECK("level",11)),
                feat([ft("power",
                [Power("Infernal Resurgence",["healing","martial"],"daily","free",
                [Trigger("You reduce an enemy to 0 hit points."),
                 Effect("You regain hit points as if you had spent a healing surge.")],"paladin","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Burning Wrath Smite",["fire","martial","reliable","weapon"],"daily","immediate reaction",
                [Target("one creature"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit("Ongoing 10 fire damage (save ends)")],"paladin","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","fighter"))
###Invoker Paragons###
,"angelic aspect":feat([ft("feat",[
        feat([ft("paragonname","angelic aspect")]),
                feat([],"Wings of Action","When you spend an AP for an extra action, you can fly 8 squares as free action and gain +2 AC until start of your next turn",CHECK("level",11)),
                feat([],"Angelic Resistance","Gain resist 10 necrotic and resist 10 radiant, or improve existing resistance by 5",CHECK("level",11)),
                feat([],"Angelic Emanation","While you aren't bloodied, enemies take a -2 penalty to attack rolls against you",CHECK("level",16)),
                feat([Power("Angelic Blades",["divine","implement"],"encounter","standard",
                            [Target("Each enemy in burst",("close burst",2)),
                             Atk([WISMOD],"reflex",damage([2,6],[WISMOD])),
                             Hit("The target is slowed until the end of your next turn."),
                             Effect("You gain a fly speed of 8 until the end of your next turn.")],"invoker","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Shielding Nimbus",["divine"],"daily","minor",
                            [Effect("Choose A Damage Type:  acid, cold, fire, force, lightning, necrotic, poison, psychic, radiant, or thunder. You gain resist 10 to that damage type until the end of the encounter. If you already have resistance to that damage type, the resistance increases by 5 until the end of the encounter.")],"invoker","utility","12"),],"","",
                            CHECK("level",12)),
                feat([Power("Coldfire Pillar",["cold","divine","fire","implement"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",3)),
                             Atk([WISMOD],"reflex",damage([4,8],[WISMOD])),
                             Miss(),
                             Effect("You are immune to cold damage and fire damage until the start of your next turn.")],"invoker","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","invoker"))
,"blightspeaker":feat([ft("feat",[
        feat([ft("paragonname","blightspeaker")]),
                feat([],"Blighting Action","When you spend an AP for an extra action, each enemy in 5 squares gains vulnerable 5 necrotic, and all damage you deal this turn is also necrotic",CHECK("level",11)),
                feat([],"Dissolution's Call",["When you score a critical hit with a divine attack power, regain ",lambda x:x.statret("wis")+5," hit points"],CHECK("level",11)),
                feat([],"Echoed Malediction","When a creature saves against an effect caused by you, that creature takes 10 necrotic damage",CHECK("level",16)),
                feat([Power("Chains Of Death",["divine","implement","necrotic"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"will",damage([2,6],[WISMOD])),
                             Hit("The target is restrained until the end of your next turn.")],"invoker","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("False Life",["divine"],"daily","minor",
                            [Effect(["You gain ",MOD("half level","wis")," temporary hit points. If you have hit an enemy since the end of your last turn, you instead gain ",MOD("level","wis")," temporary hit points."])],"invoker","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Endbringer",["divine","implement","necrotic"],"daily","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"will",damage([2,6],[WISMOD])),
                             Hit("The target takes ongoing 15 necrotic damage and is blinded (save ends both)."),
                             Miss("Half damage, and the target takes ongoing 10 necrotic damage (save ends).")],"invoker","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","invoker"))
,"flame of hope":feat([ft("feat",[
        feat([ft("paragonname","flame of hope")]),
                feat([],"Inspiring Action",["When you spend an AP to attack, you and allies in 5 squares gain a +",INTMOD," bonus to attack rolls against each target of the attack until start of your next turn"],CHECK("level",11)),
                feat([],"Enduring Hope","Each ally in 5 squares gain a +1 bonus to saving throws when you are not bloodied",CHECK("level",11)),
                feat([],"Righteous Resurgence",["When you use second wind, enemies in 5 squares take 1d6+",INTMOD," fire and radiant damage, and allies in 5 squares gain that many temporary HP"],CHECK("level",16)),
                feat([Power("Numinous Cascade",["divine","fire","implement","radiant"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"reflex",damage([2,10],[WISMOD])),
                             Hit("Until the end of your next turn, your allies gain a +2 bonus to attack rolls against the primary target."),
                             Effect("Make a secondary attack."),
                             Target("One creature within 5 squares of the primary target"),
                             Atk([WISMOD],"reflex",damage([1,10],[WISMOD])),
                             Hit("Until the end of your next turn, your allies gain a +2 bonus to attack rolls against the secondary target.")],"invoker","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Blinding Ward",["divine"],"daily","immediate interrupt",
                            [Trigger("An enemy within 10 squares of you makes an attack roll against you or your ally",("ranged",10)),
                             Target("The triggering enemy",("ranged",10)),
                             Effect("The target is blinded until the start of your next turn.")],"invoker","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Sunburst Bulwark",["divine","fire","healing","implement","radiant"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",3)),
                             Atk([WISMOD],"fortitude",damage([2,8],[WISMOD])),
                             Hit("The target is immobilized until the end of your next turn."),
                             Effect(["Each ally in the burst can spend a healing surge and regains ",MOD("int")," additional hit points."])],"invoker","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","invoker"))
,"hammer of vengeance":feat([ft("feat",[
        feat([ft("paragonname","angelic aspect")]),
                feat([],"Lingering Rebuke",["When you spend AP for extra action, enemies that miss you or ally in 5 squares takes 1d6+",CONMOD," thunder damage."],CHECK("level",11)),
                feat([],"Enduring Castigation","While you are not bloodied, enemies in 5 squares take a -2 penalty to saving throws",CHECK("level",11)),
                feat([],"Penance","When you score a critical hit with a divine power, the target is dazed until end of your next turn",CHECK("level",16)),
                feat([Power("Mark Of Castigation",["divine","implement","thunder"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"will",damage([1,10],[WISMOD])),
                             Hit(["If the target hits or misses you or your ally before the end of your next turn, the target takes ",dmg(WISMOD,3,10),"."])],"invoker","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Thundering Summons",["divine","teleportation"],"encounter","move",
                            [Target("One or two allies in burst",("close burst",10)),
                             Effect("You teleport each target to a space adjacent to you.")],"invoker","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Warding Thunder",["divine","implement","thunder","zone"],"daily","standard",
                            [Target("Each enemy in burst",("area burst",2,10)),
                             Atk([WISMOD],"fortitude",damage([5,6],[WISMOD])),
                             Effect("The burst creates a zone of warding thunder that lasts until the end of your next turn. Choose an ally when the zone is created. If any enemy attacks that ally, you can repeat the attack against each enemy within the zone as a free action."),
                             Sustain()],"invoker","daily","20")],"","",
                             CHECK("level",20))
                 ])],
                 "paragon","",lambda x:x.check("checkclass","invoker"))
###Paladin Paragons###
,"astral weapon":feat([ft("feat",[
        feat([ft("paragonname","astral weapon")]),
                feat([],"Astral Judgement","Enemies marked by you that attack your allies without attacking you take -2 defenses until mark ends",CHECK("level",11)),
                feat([],"Astral Rejuvination Action","Spend an AP to regain paladin encounter power instead of taking extra action",CHECK("level",11)),
                feat([],"Courage from on High","You gain a +2 bonus to saving throws against fear effects",CHECK("level",16)),
                feat([Power("Carving a Path of Light",["divine","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("Until end of your next turn, your allies have combat advantage against any enemy adjacent to you.")],"paladin","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Pray for More",["divine"],"encounter","free",
                            [Effect("If you don't like the damage you have rolled with one of your attacks, reroll the damage.  You must use the result of the second roll.")],"paladin","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Astral Whirlwind",["divine","fear","weapon"],"daily","standard",
                            [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(2,[STRMOD]),[]),
                             Hit("The target takes a -2 penalty to all defense (save ends)."),
                             Special("If this attack kills one or more evil or chaotic evil chreatures, roll a d20.  On a roll of 10 or higher, you can use this power again during this encounter.")],"paladin","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","paladin"))

,"champion of order":feat([ft("feat",[
        feat([ft("paragonname","champion of order")]),
                feat([],"Champion's Action","When you spend an AP for an extra action adjacent enemies take -1 to all defenses until start of your next turn",CHECK("level",11)),
                feat([],"In Defense of Order","Challenged foe provokes OA's from you for attacking your allies; deal +2d6 radiant vs. challenged demons and elementals.",CHECK("level",11)),
                feat([],"Champion's Hammer","Your attacks ignore the resistances of demons and elemental creatures.",CHECK("level",16)),
                feat([Power("Certain Justice",["divine","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([STRMOD, 4],"AC",damage(1,[STRMOD]),["melee"]),
                             Hit("If the target is marked by you, it is also weakened and dazed until it is not marked by you.")],"paladin","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("None Shall Pass",["divine"],"daily","free",
                            [Effect("Until the end of the encounter, every use of your Divine Challenge targets two enemies rather than one.")],"paladin","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Rule of Order",["divine","radiant","weapon"],"daily","standard",
                            [Special("If the target has scored a critical hit against you or your allies in this encounter, your attack gains a +2 power bonus and deals +2d10 radiant damage"),
                             Target("one creature"),Atk([STRMOD],"fortitude",damage(4,[STRMOD]),["melee"]),
                             Hit("You push the target one square.  The target is weakened (save ends)"),
                             Miss("Reduce damage to 1[W]+bonus, and the target is weakened (save ends)")],"paladin","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","paladin"))

,"hospitaler":feat([ft("feat",[
        feat([ft("paragonname","hospitaler")]),
                feat([],"Hospitaler's Blessing",["When challenged foe makes an attack that doesn't include you, targeted ally regains ",lambda x:x.mod("wis")+x.statret("level")/2," hit points"],CHECK("level",11)),
                feat([],"Hospitaler's Action",["When you spend an AP for an extra action, each ally in 5 squares heals ",lambda x:x.mod("wis"), " hit points"],CHECK("level",11)),
                feat([ft("layonhands",("",lambda x:x.mod("cha")))],"Hospitaler's Care",["Heal ",lambda x:x.mod("cha")," extra hit points with Lay on Hands power"],CHECK("level",16)),
                feat([Power("Warding Blow",["divine","weapon"],"encounter","standard",
                            [Target("one creature that is marked by you"),Atk([CHAMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("Each ally within 5 squares of you can make saving throw")],"paladin","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Healing Font",["divine"],"daily","minor",
                            [Effect(["Until the end of this encounter, when you attack on your turn and hit at least one enemy, you heal an ally.  Choose one ally within 10 squares of you.  That ally regains ",lambda x:x.mod("wis"),"d6 hit points"])],"paladin","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Rule of Order",["divine","healing","radiant","weapon"],"daily","standard",
                            [Target("one creature"),Atk([CHAMOD],"fortitude",damage(4,[CHAMOD]),["melee"]),
                             Effect(["Choose one ally within 10 squares of you.  The ally can spend a healing surge and regain an additional ",lambda x:x.mod("cha")," hit points."])],"paladin","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","paladin"))

,"justiciar":feat([ft("feat",[
        feat([ft("paragonname","justiciar")]),
                feat([],"Just Action","When you spend an AP for an extra action, each adjacent enemy is weakened until the end of its next turn",CHECK("level",11)),
                feat([],"Just Spirit","Each ally adjacent to you can reroll one saving throw at the end of his or her turn",CHECK("level",11)),
                feat([],"Just Shelter","Allies adjacent to you are immunte to fear and charm effects and recieve a +1 bonus to saving throws",CHECK("level",16)),
                feat([Power("Just Radiance",["divine","implement","radiant"],"encounter","standard",
                            [Target("Each enemy marked by you in burst",("close burst",5)),Atk([CHAMOD],"will",damage([2,8],[CHAMOD])),
                             Hit("The target cannot make an attack that does not include you until the end of your next turn.")],"paladin","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Strike Me Instead",["divine"],"daily","immediate interrupt",
                            [Trigger("An ally within 5 squares of you is attacked"),
                             Effect("The attack misses all of your allies it targets, but it automatically hits you even if you weren't a target of the attack")],"paladin","utility",12)],"","",
                             CHECK("level",12)),
                feat([Power("Challenge the Unjust",["divine","implement","radiant"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",10)),Atk([CHAMOD],"will",damage([3,8],[CHAMOD])),
                             Hit("The target is marked until the end of your next turn"),
                             Miss("Half damage, and the target is marked until the end of your next turn")],"paladin","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","paladin"))
###Ranger Paragons###
,"avalanche hurler":feat([ft("feat",[
        feat([ft("paragonname","avalanche hurler")]),
                feat([],"Throwing Action","When you spend an AP for an extra action, make a ranged basic attack with a thrown weapon as a free action that does not provoke opportunity attacks",CHECK("level",11)),
                feat([ft(["and","rangedweaponsize","heavy thrownweaponsize"],["",1]),ft(["and","rangedweaponsize","light thrownweaponsize"],["",1])],"Throwing Master","When using a light thrown or heavy thrown weapon as a ranged weapon, increase the weapon's damage die by one size",CHECK("level",11)),
                feat([],"Uncanny Thrower","You take no penalty for thrown weapons against a target at long range",CHECK("level",16)),
                feat([ft("power",
                [Power("Landslide Strike",["martial","weapon"],"encounter","standard",
                [Effect("Before the attack, you can shift 2 squares."),
                 Target("one or two creatures, one attack per target"),Atk([STRMOD],"AC",damage(2,[STRMOD,DEXMOD]),["melee"],["primary","offhand"])
                 ,Atk([DEXMOD],"AC",damage(2,[STRMOD,DEXMOD]),["ranged","thrownmelee"],["primary","offhand"])],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Quick-Draw Trick",["martial"],"at-will","free",
                [Effect("You draw or stow one or two weapons")],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Eruption of Steel",["martial","weapon"],"daily","standard",
                [Target("One creature, two aattacks"),Atk([STRMOD],"AC",damage(2,[STRMOD,DEXMOD]),["melee"],["primary","offhand"]),
                 Atk([DEXMOD],"AC",damage(2,[STRMOD,DEXMOD]),["ranged","thrownmelee"],["primary","offhand"]),
                 Miss("Half damage per attack."),
                 Effect("Make a secondary attack:"),
                 Target("One or two creature other than the primary target, one attack per target"),Atk([STRMOD],"AC",damage(1,[STRMOD,DEXMOD]),["melee"],["primary","offhand"]),
                 Atk([DEXMOD],"AC",damage(1,[STRMOD,DEXMOD]),["ranged","thrownmelee"],["primary","offhand"]),
                 Miss()],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger"))

,"battlefield archer":feat([ft("feat",[
        feat([ft("paragonname","battlefield archer")]),
                feat([],"Archer's Action","You can spend an AP to reroll one ranged attack or damage roll, instead of taking an extra action",CHECK("level",11)),
                feat([],"Battlefield Experience",["Designate up to ",lambda x:x.mod("wis")," creatures as quarry at one time.  +1 on attack rolls vs. quarry."],CHECK("level",11)),
                feat([],"Battle Surge","When you spend an AP for an extra action or Archer's Action, gain +5 to AC vs. opportunity attacks until end of encounter.",CHECK("level",16)),
                feat([ft("power",
                [Power("Combined Fire",["martial","weapon"],"encounter","immediate reaction",
                [Trigger("An ally makes a ranged attack or area attack"),
                 Target("one creature attacked by your ally"),Atk([DEXMOD],"AC",damage(3,[DEXMOD]),["ranged"])],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Archer's Glory",["martial"],"encounter","free",
                [Trigger("One of your ranged attacks drops an enemy to 0 hit points or fewer"),
                 Effect("You gain an action point that you must spend before the end of your next turn")],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Quarry's Bane",["martial","weapon"],"daily","standard",
                [Target("each enemy designated as your quarry"),Atk([DEXMOD],"AC",damage(3,[DEXMOD]),["ranged"]),
                 Miss("The target is knocked prone as it dodges your attack.")],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","archer fighting style"))

,"beast stalker":feat([ft("feat",[
        feat([ft("paragonname","beast stalker")]),
                feat([],"Beast Stalker's Action","When you spend an AP for an extra action, gain +4 on attack rolls vs. quarry until start of next turn",CHECK("level",11)),
                feat([specialMenu(["beasts","magical beasts"],[feat([]),feat([])],"Hunter's Quarry deals an extra 2 damage against ")],"Chosen Prey","",CHECK("level",11)),
                feat([],"Action Shift","When you spend an AP for an extra action you can shift as a minor action until the end of the encounter",CHECK("level",16)),
                feat([ft("power",
                [Power("Pinpointing Arrow",["martial","weapon"],"encounter","standard",
                [Special("Ignore penalties for cover (but not superior cover), concealment, and total concealment.  You can attack an invisible target as if it wasn't invisible."),
                 Target("one creature designated as your quarry"),Atk([DEXMOD],"AC",damage(2,[DEXMOD]),["ranged"])],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Hunter's Grace",["martial"],"daily","no",
                [Effect("Make a Stealth check and use that as your initiative check result.  If you get the first turn in the encounter, you can shift up to your speed in the first turn as a free action before taking any other actions.")],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Beast Stalker's Target",["martial","weapon"],"daily","standard",
                [Target("One Creature"),Atk([DEXMOD],"AC",damage(4,[DEXMOD]),["ranged"]),
                 Effect("The target is designated as your quarry until the end of the encounter, and you can designate one additional creature as a quarry following the normal Hunter's Quarry rules.")],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","archer fighting style"))

,"blade banshee":feat([ft("feat",[
        feat([ft("paragonname","blade banshee")]),
                feat([],"Banshee's Action",["When you spend an AP to take an extra action while wielding 2 weapons, adjacent enemies take ",WISMOD," thunder damage."],CHECK("level",11)),
                feat([],"Bladed Disruption","When wielding 2 melee weapons, any creature you hit twice during your turn takes a -2 penalty to attacks until the start of your next turn",CHECK("level",11)),
                feat([ft("meleedamage",("",WISMOD))],"Shrieking Blades",["When wielding 2 melee weapons, your melee attacks deal ",WISMOD," extra thunder damage."],CHECK("level",16)),
                feat([ft("power",
                [Power("Steel Scream",["martial","thunder","weapon"],"encounter","standard",
                [Target("each creature in burst"),Atk([STRMOD],"will",damage(1,[STRMOD]),["melee","primary"],["longswordname"]),
                 Hit("The target is dazed until the end of your next turn.")],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Soothing Reverberation",["healing","martial","weapon"],"daily","minor",
                [Requirement("You must be wielding a longsword and another melee weapon."),
                 Target("each ally in burst",("close burst",3)),Effect("Each target can spend a healing surge either to regain hit points or to negate being dazed or stunned.")],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Mind-Bending Blades",["charm","martial","reliable","weapon"],"daily","standard",
                [Target("One creature"),Atk([STRMOD],"fortitude",damage(1,[STRMOD]),["melee","primary"],["longswordname"]),
                 Hit("The target is dominated (save ends).  As a standard action, you can end the dominated effect and deal 5d6 thunder damage to the target and each creature adjacent to it.")],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("checkrace","eladrin"))

,"blade dancer":feat([ft("feat",[
        feat([ft("paragonname","blade dancer")]),
                feat([],"Dual-Blade Action",["You can spend an AP to make one melee basic attack with each your primary and off-hand weapon with +",WISMOD," bonus damage, instead of an extra action"],CHECK("level",11)),
                feat([],"Dancing Defense","If you are wileding two melee weapons and hit with at least two attacks on your turn, gain +2 to AC and Reflex until the start of your next turn",CHECK("level",11)),
                feat([ft("ac",["",lambda x: x.inventory.dualwield()]),ft("meleedamage",["",lambda x:x.inventory.dualwield()])],"Cutting Steps","When wielding two melee weapons, you gain a +1 bonus to melee damage rolls and AC",CHECK("level",16)),
                feat([ft("power",
                [Power("Cross-Body Parry",["martial","weapon"],"encounter","immediate interrupt",
                [Trigger("An enemy makes a melee attack against you"),
                 Target("The triggering enemy, two attacks"),Atk([STRMOD],"reflex",damage(1,[STRMOD,[["both","heavy blade","light blade"],DEXMOD]]),["melee"],["primary","offhand"]),
                 Hit("If both attacks hit, the taret is weakened until the end of your next turn.")],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Misleading Bladework",["martial","weapon"],"daily","move",
                [Requirement("You must be wielding two melee weapons."),
                 Effect(["You shift ",DEXMOD," squares.  Throughout the shift, each adjacent enemy takes a -2 penalty to attack rolls and grants combat advantage to your allies until the start of your next turn."])],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Blade Dance",["martial","weapon"],"daily","standard",
                [Target("One creature"),Atk([STRMOD],"AC",damage(2,[STRMOD,[["both","heavy blade","light blade"],DEXMOD]]),["melee","primary"]),
                 Miss(),
                 Effect("You can shift 3 squares and repeat the attack against a asecond target.  You can then shift 3 squares and repeat the attack against a third target.")],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger"))

,"feral spirit":feat([ft("feat",[
        feat([ft("paragonname","feral spirit")]),
                feat([],"Fearsome Partnership","When you are within 10 squares of your beast companion, it gains a +2 bonus on damage rolls",CHECK("level",11)),
                feat([],"Feral Action","When you spend an AP to take an extra action, your beast companion gains +4 to attack rolls until start of your next turn",CHECK("level",11)),
                feat([],"Spirit Link","When your beast companion uses second wind, you can choose to spend one of your own healing surges rather than one of the beast's healing surges",CHECK("level",16)),
                feat([ft("power",
                [Power("Feral Diversion",["beast","martial"],"encounter","standard",
                [Effect("Before the attack, your beast companion can shift 3 spaces."),
                 Target("one creature adjacent to you",("melee",1)),Atk([lambda x:x.statret("beastatk")],"AC",damage([1,lambda x:x.statret("beastdiesize")],[lambda x:x.mod("beaststr"),lambda x:x.mod("beastdex")])),
                 Hit("You can shift 3 squares away from the target as a free action")],"ranger","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Swiftness of Spirit",["beast","martial"],"encounter","minor",
                [Target("Your beast companion in burst",("close burst",5)),Effect("The target takes a move action or gains a +2 bonus to its next attack roll during this encounter.")],"ranger","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Twin-Soul Strike",["beast","martial","weapon"],"daily","standard",
                [Target("one creature",("melee weapon / beast",1)),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Miss(),
                 Effect("Your beast companion gains combat advantage against the primary target for the next attack the beast makes before the end of your next turn.  Then the beast makes a secondary attack."),
                 Target("The primary target or another creature"),Atk([lambda x:x.statret("beastatk")],"AC",damage([2,lambda x:x.statret("beastdiesize")],[lambda x:x.mod("beaststr"),lambda x:x.mod("beastdex")])),
                 Effect("If the secondary target is different from the primary target, you gain combat advantage against the secondary target for the next attack you make against it before the end of your next turn.")],"ranger","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","beast mastery"))

,"giantslayer":feat([ft("feat",[
        feat([ft("paragonname","giantslayer")]),
                feat([],"Giant-Slaying Action","When you spend an AP for an extra action, gain +2 to attack rolls and AC (+4 vs. large or larger enemies) until the start of your next turn",lambda x:x.check("level",11)),
                feat([],"Through the Fingers","If a creature grabs you, make a melee basic attack against it as an opportunity action.  On hit, make escape attempt with bonus equal to damage dealt as free action",lambda x:x.check("level",11)),
                feat([],"Small Target","Gain a +4 bonus to opportunity attacks from Large or Larger enemies and +2 against all other enemies.",lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Little Bait",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"reflex",damage(2,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"reflex",damage(2,[DEXMOD]),["ranged"]),
                 Hit("The target is dazed and takes a -5 penalty to attack rolls against your allies until the end of your next turn.  If the target is large or larger, it takes a -2 penalty to AC until the end of your next turn.")],"paragon","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Ride the Giant Down",["martial"],"daily","move",
                [Target("One Large or larger creature",("melee",1)),Effect(["You move into the target's space, provoking opportunity attacks as normal.  Until you leave the target's space, the target grants combat advantage to you and your allies and takes a -2 penalty to attack rolls",orfeat(", and you grant combat advantage to all other enemies","","athletics"),".  Any attack that damages you also deals have the attack's damage to the target.  When the target moves, you move with it, staying in the same portion of the target's space."]),
                 Line(["If the target hits you with a melee attack, it can slide you 1 square to a square adjacent to its space unless you succeed a saving throw.",orfeat("","  You can also make a saving throw to negate any pull, push, or slide that would move you out of the target's space.","athletics")])],"paragon","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Giantslayer Strike",["martial","reliable","weapon"],"daily","standard",
                [Target("One creature"),Atk([STRMOD],"AC",damage(4,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"AC",damage(4,[DEXMOD]),["ranged"]),
                 Hit("The target is dazed (save ends).  If the target is Large or larger, the attack deals 1[W] extra damage, and instead of being dazed, the target is stunned (save ends).")],"paragon","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") or x.check("checkclass","fighter"))

,"hellborn shadow":feat([ft("feat",[
        feat([ft("paragonname","hellborn shadow")]),
                feat([],"Hunter's Feast",["Whenever you reduce your quarry to 0 hit points, gain ",lambda x:x.mod("con")+1," temporary hit points."],lambda x:x.check("level",11)),
                feat([],"Immolation Action","You can spend an AP to deal fire damage to your quarry equal to your Hunter's Quarry damage, instead of taking an extra action",lambda x:x.check("level",11)),
                feat([],"Hellfire Caress","Whenever you hit your quarry with a melee or ranged attack, the target loses fire resistance and immunity until the end of your next turn.",lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Shadowbite Strike",["martial","weapon"],"encounter","standard",
                [Target("one or two creatures, primary and off-hand attacks"),Atk([STRMOD],"AC",damage(1,[STRMOD,CHAMOD]),["melee"]),
                 Hit("The target gains vulnerable 5 to your attacks until the end of your next turn"),
                 Effect("You gain concealment until the start of your next turn.")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Wings of Devilry",["martial"],"daily","move",
                [Effect(["You fly a number of squares equal to your speed and must land at the end of this movement.  You then gain concealment until the end of your next turn."])],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Balefire Scourge",["martial","weapon"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"],["primary","offhand"]),
                 Hit("The target takes ongoing 10 fire damage and loses any fire resistance or immunity (save ends both)."),
                 Miss(),
                 Effect("You gain concealment until the end of your next turn.")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("checkrace","tiefling"))

,"horizon walker":feat([ft("feat",[
        feat([ft("paragonname","horizon walker")]),
                feat([],"Wanderer's Action","When you spend an AP to take an extra action, you can also take a move action before or after that action",lambda x:x.check("level",11)),
                feat([],"Shadowfell Sight","You gain darkvision.  If you are in the shadowfell, you also gain a +5 bonus to perception checks.",lambda x:x.check("level",11)),
                feat([ft("surge",["",WISMOD])],"Astral Infusion",["Gain a +",WISMOD," bonus to healing surge value and death saving throws.  Cannot die from failing death saving throws in the Astral Sea"],lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Worldly Strike",["arcane","weapon"],"encounter","standard",
                [Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"AC",damage(2,[DEXMOD]),["ranged"]),
                 Hit(["If the target has an origin other than natural, the attack deals ",WISMOD," extra damage, and the target is dazed until the start of your next turn"])],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Fey Strider",["arcane","teleport"],"encounter","move",
                [Effect(["You can teleport ",lambda x:x.mod("wis")+3," squares.  If you're in the Feywild, you can teleport an additional 3 squares."]),
                 Special("If you have a beast companion and it is adjacent to you, it can teleport with you when you use this power.")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Elemental Chaos Smite",["arcane","weapon","acid","cold","fire","radiant","or","thunder"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Hit("The target takes ongoing 10 damage of the same type dealt by the attack (save ends).  If you're in the Elemental Chaos, the target instead takes ongoing 20 damage of that damage type (save ends)."),
                 Miss("half damage, and no ongoing damage.")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger"))

,"pathfinder":feat([ft("feat",[
        feat([ft("paragonname","pathfinder")]),
                feat([ft("surges",("",2))],"Battlehoned","Gain two extra healing surges per day",lambda x:x.check("level",11)),
                feat([],"Pathfinder's Action","When you spend an AP for an extra action, you also gain a move action",lambda x:x.check("level",11)),
                feat([],"Cruel Recovery",["When you deal damage from hunter's quarry, gain temporary hit points equal to quarry damage ",plus(WISMOD)],lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Wrong Step",["martial","weapon"],"encounter","immediate interrupt",
                [Trigger("An adjacent enemy shifts or moves"),
                 Target("The enemy"),Atk([STRMOD],"AC",damage(1,[STRMOD]),["melee"]),
                 Hit("The target is immobilized until the end of your next turn")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Act Together",["martial"],"daily","immediate reaction",
                [Trigger("An ally spends an action point to take an extra action"),
                 Effect("You gain an action point that you must spend before the end of your next turn")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Slasher's Mark",["healing","martial","weapon"],"daily","standard",
                [Special("You can spend a healing surge before attacking"),
                 Target("One creature"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["primary","melee"]),
                 Effect("The target is marked until the end of the encounter.  Make a secondary attack."),
                 Target("One creature other than the primary target"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["offhand","melee"]),
                 Effect("The target is marked until the end of the encounter")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","two-bladed fighting style"))

,"pack runner":feat([ft("feat",[
        feat([ft("paragonname","pack runner")]),
                feat([],"Runner's Action","When you spend an AP for an extra action, you can shift half your speed before or after taking the extra action",lambda x:x.check("level",11)),
                feat([],"Pack Chase","If you and your beast companion move at least 2 squares during your turn, you both gain +1 to attack rolls until the start of your next turn",lambda x:x.check("level",11)),
                feat([],"Canine's Cunning","If you are within 5 squares of beast companion, you can command it to shift 1 square as a minor action.  You can shift 1 square when you do this",lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Pack Runner Assault",["beast","martial","weapon"],"encounter","standard",
                [Target("One creature",("melee weapon / beast",1)),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                 Hit("The target grants combat advantage to your beast companion for the secondary attack."),
                 Effect("Your beast companion makes a secondary attack against the target"),
                 Atk([lambda x:x.statret("beastatk")],"reflex",damage([1,lambda x:x.statret("beastdiesize")],[lambda x:x.mod("beastdex")])),
                 Hit("The target is knocked prone.")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Wolfskin",["beast","primal"],"daily","minor",
                [Requirement("You must be within 5 squares of your beast companion."),
                 Effect("You gain a +5 power bonus to Stealth and Perception checks and a +2 power bonus to speed.  This effect lasts for 1 hour, until you take a minor action to end it, or until you are knocked unconscious.")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Neck-Bite Pounce",["beast","martial"],"daily","standard",
                [Target("One creature",("melee beast",1)),Atk([lambda x:x.statret("beastatk")],"AC",damage([3,lambda x:x.statret("beastdiesize")],[lambda x:x.mod("beastdex")])),
                 Hit("The target is knocked prone and takes ongoing 10 damage (save ends)."),
                 Miss("No damage, and the target is slowed and takes ongoing 10 damage (save ends both).")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","beast mastery") and x.check("beast","wolf"))

,"ruthless punisher":feat([ft("feat",[
        feat([ft("paragonname","ruthless punisher")]),
                feat([],"Ruthless Action","You can spend an AP to reroll any attack roll against a humanoid target designated as your quarry, instead of an extra action",lambda x:x.check("level",11)),
                feat([],"Most Dangerous Prey",["Against any humanoid target designated as your quarry, you gain a +",WISMOD," bonus to damage rolls"],lambda x:x.check("level",11)),
                feat([],"Ongoing Punishment",["Gain a +",WISMOD," bonus to the ondoing damage you deal.  Gain combat advantage against humanoid enemies that are taking ongoing damage."],lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Crippling Shot",["martial","weapon"],"encounter","standard",
                [Atk([STRMOD],"reflex",damage(1,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"reflex",damage(1,[DEXMOD]),["ranged"]),
                 Hit("The target is slowed until the end of your next turn.  If the target is a humanoid, it is also weakened until the end of your next turn.")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Named Dread",["fear","martial"],"daily","minor",
                [Target("Each humanoid enemy in burst that can hear you",("close burst",10)),Effect(["You speak your name, and the targets take a -2 penalty to attack rolls against you until the end of the encounter.",orfeat("","  You also gain combat advantage against the targets until the end of your next turn.","intimidate")])],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Bleed Away",["martial","weapon"],"daily","standard",
                [Target("one creature, three attacks"),Atk([STRMOD],"reflex",damage(1,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"reflex",damage(1,[DEXMOD]),["ranged"]),
                 Hit("You slide the target 2 squares and can shift 2 squares after each hit."),
                 Miss("No damage, and you can slide the target 1 square and shift 1 square after each miss."),
                 Effect("The target can negate each slide as a free action, but it then takes ongoing 10 damage (save ends) per square of forced movement negated.")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger"))

,"sharpshooter":feat([ft("feat",[
        feat([ft("paragonname","sharpshooter")]),
                feat([],"Rapid-Fire Action","When you spend an AP for an extra action, you can make a ranged basic attack with a bow or crossbow as a free action",lambda x:x.check("level",11)),
                feat([],"Opportunity Fire","You can use a bow or a loaded crossbow to make opportunity attacks.  These attacks don't provoke opportunity attacks",lambda x:x.check("level",11)),
                feat([],"Seeking Arrow","You don't take the normal penalty to attack rolls for concealment or cover against your quarry",lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Stab and Shoot",["martial","weapon"],"encounter","standard",
                [Target("one creature",("melee",1)),Atk([DEXMOD],"AC",damage(1,[DEXMOD]),[],["bow","crossbow"]),
                 Hit("The target is dazed until the end of your turn.  Make a secondary attack."),
                 Target("One creature other than the primary target in weapon range"),Atk([DEXMOD],"AC",damage(2,[DEXMOD]),[],["bow","crossbow"])],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Perfect Aim",["martial","weapon"],"encounter","minor",
                [Requirement("You must be wielding a ranged weapon."),
                 Effect(["Until the end of your next turn, your next ranged attack gains a +",WISMOD," power bonus to the attack and damage rolls.  If you move or take damage before making a ranged attack, the bonus is lost."])],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Escalating Barrage",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([DEXMOD],"AC",damage(2,[DEXMOD]),["ranged"]),
                 Target("one creature other than the primary target"),Atk([DEXMOD,2],"AC",damage(3,[DEXMOD]),["ranged"]),
                 Target("one creature other than the primary and secondary targets"),Atk([DEXMOD,4],"AC",damage(4,[DEXMOD]),["ranged"])],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                ])],
                 "paragon","",lambda x: x.check("checkclass","ranger"))

,"stormwarden":feat([ft("feat",[
        feat([ft("paragonname","stormwarden")]),
                feat([],"Blade Storm",["As long as you are armed with a melee weapon and can make opportunity attacks, at end of turn one adjacent enemy takes ",lambda x:x.mod("dex"), " damage"],lambda x:x.check("level",11)),
                feat([],"Stormstep Action","When you spend an AP for an extra action you can teleport 3 squares either before or after the action.",lambda x:x.check("level",11)),
                feat([],"Blade Storm",["As long as you are armed with a melee weapon and can make opportunity attacks, at end of turn two adjacent enemies take ",lambda x:x.mod("dex"), " lightning damage"],lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Clearing the Ground",["martial","weapon"],"encounter","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(1,[STRMOD]),["primary","melee"]),
                 Hit("Push the target 1 square")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Throw Caution to the Wind",["martial","stance"],"encounter","minor",
                [Effect("You take a -2 penalty to all defenses and gain a +2 bonus to attack rolls.")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Cold Steel Hurricane",["martial","weapon"],"daily","standard",
                [Special(["Before you attack you can shift ",WISMOD, " squares"]),
                 Target("each enemy in burst you can see",("close burst",1)),Atk([STRMOD],"AC",damage(1,[STRMOD]),["primary","melee"]),
                 Other("Offhand attack:"),
                 Target(""),Atk([STRMOD],"AC",damage(1,[STRMOD]),["offhand","melee"]),
                 Effect("You regain your second wind if you have already used it during this encounter")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","two-bladed fighting style"))

,"sylvan archer":feat([ft("feat",[
        feat([ft("paragonname","sylvan archer")]),
                feat([],"Archer's Action","When you spend an AP for an extra action, your ranged attacks take no penalty for up to superior cover or total concealment until end of next turn",lambda x:x.check("level",11)),
                feat([ft("perception",["",2])],"Sylvan Senses","Gain a +2 bonus to Perception checks",lambda x:x.check("level",11)),
                feat([],"Intuitive Hunter",["When making ranged attacks, add ",WISMOD," to the extra damage dealt by Hunter's Quarry"],lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Shaft Splitter",["martial","weapon"],"encounter","immediate interrupt",
                [Trigger("An enemy hits you or an ally within 5 squares of you"),
                 Target("The triggering enemy"),Atk([DEXMOD],"reflex",damage(2,[DEXMOD]),["ranged"]),
                 Hit("The target takes a -5 penalty to the triggering attack roll")],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Elf-Eyed Archery",["martial","weapon"],"encounter","minor",
                [Target("One creature"),Effect("You designate the target as your quarry, even if it isn't the closest enemy to you.  The target doesn't count against your normal limit of one quarry at a time, although you can still deal your Hunter's Quarry damage only once per round."),
                 Special("Using this power doesn't provoke opportunity attacks.")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Named Arrow",["martial","weapon"],"daily","standard",
                [Target("one creature"),Effect("If you speak the target's name when you use this power, you designate the target as your quarry and take no penalties to the attack roll for cover, superior cover, concealment, or total concealment."),
                 Atk([DEXMOD],"will",damage(4,[DEXMOD]),["ranged"]),
                 Hit("The target is dazed (save ends).  If you spoke the target's name, instead of being dazed, the target is stunned (save ends)."),
                 Miss("Half damage, and the target is dazed until the end of its next turn.  If you spoke the target's name, instead of being dazed, the target is stunned until the end of its next turn.")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("checkrace","elf"))

,"wildcat stalker":feat([ft("feat",[
        feat([ft("paragonname","wildcat stalker")]),
                feat([],"Neck Seeker","You and your beast companion gain a +1 bonus to attack and damage rolls against any bloody enemy designated as your quarry",lambda x:x.check("level",11)),
                feat([],"Prowling Action","When you spend an AP for an extra action, you also gain concealment until the end of your next turn",lambda x:x.check("level",11)),
                feat([],"Cat's Quarry","When you or your beast companion reduces an enemy to 0 hit points, you can designate a new quarry as a free action",lambda x:x.check("level",16)),
                feat([ft("power",
                [Power("Cat-Eyed Strike",["beast","martial","weapon"],"encounter","standard",
                [Target("One creature",("melee or ranged weapon / beast",1)),Atk([STRMOD],"reflex",damage(2,[STRMOD]),["melee"]),
                 Atk([DEXMOD],"reflex",damage(2,[DEXMOD]),["ranged"]),
                 Hit(["If you have combat advantage against the target, the attack deas ",WISMOD," extra damage."])],"ranger","encounter",11)])],"","",
                lambda x:x.check("level",11)),
                feat([ft("power",
                [Power("Lurk Unseen",["beast","primal"],"daily","minor",
                [Requirement("You and your beast companion must have concealment."),
                 Target("You and your beast companion in burst",("close burst",1)),
                 Effect("Each target has total concealment until the end of your next turn or until the target attacks.")],"ranger","utility",12)])],"","",
                lambda x:x.check("level",12)),
                feat([ft("power",
                [Power("Panther Pounce",["beast","martial","weapon"],"daily","standard",
                [Target("One creature designated as your quarry",("melee beast",1)),Atk([lambda x:x.statret("beastatk")],"AC",damage([2,lambda x:x.statret("beastdiesize")],[lambda x:x.mod("beastdex")])),
                 Hit(["If your beast companion was hidden from the target at the start of your turn, the attack deals 1d",lambda x:x.statret("beastdiesize")," extra damage."]),
                 Miss(),
                 Effect("Before and after the attack, your beast companion can shift its speed, ignoring difficult terrain.")],"ranger","daily",20)])],"","",
                 lambda x:x.check("level",20))
                 ])],
                 "paragon","",lambda x: x.check("checkclass","ranger") and x.check("feature","beast mastery") and x.check("beast","cat"))
###Rogue Paragons###
,"cat burglar":feat([ft("feat",[
        feat([ft("paragonname","cat burglar")]),
                feat([],"Acrobatic Action","When you spend an AP for an extra action, you also gain a move action",CHECK("level",11)),
                feat([],"Body Control","Whenever you are pushed, pulled, or slid, you can reduce the number of squares by 1",CHECK("level",11)),
                feat([],"Athletic Master","Roll twice when you make an athletics check.  Use whichever result you prefer.",CHECK("level",16)),
                feat([ft("power",
                [Power("Cat Burglar's Gambit",["martial","weapon"],"encounter","standard",
                [Special("You can shift 3 squares before making the attack"),
                 Target("one creature"),Atk([DEXMOD],"AC",damage(3,[DEXMOD]),["melee"],["light blade"]),
                 Effect("Shift to any square adjacent to the target")],"rogue","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Instant Escape",["martial"],"encounter","immediate reaction",
                [Trigger("You become immobilized, restrained, or slowed"),
                 Effect("You end any of the above conditions that currently afflict you.  Then you can shift 2 squares.")],"rogue","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Redirected Death",["martial","weapon"],"daily","immediate interrupt",
                [Trigger("An enemy hits you with a melee attack and can reach another enemy"),
                 Target("The enemy that hit you"),Atk([DEXMOD],"reflex",damage(2,[DEXMOD]),["melee"],["light blade"]),
                 Hit("The target's attack misses you and hits an enemy of your choice within range of the target's attack.  You do not deal damage for hitting with this attack."),
                 Miss("Deal the listed damage for the attack."),
                 Effect("Shift 1 square.")],"rogue","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","rogue"))

,"daggermaster":feat([ft("feat",[
        feat([ft("paragonname","daggermaster")]),
                feat([],"Daggermaster's Action","You can spend an AP to reroll one attack or damage roll with a dagger, instead of an extra action",CHECK("level",11)),
                feat([],"Dagger Precision","You can score critical hits with daggers on a roll of 18-20",CHECK("level",11)),
                feat([],"Dagger Advantage","When you score a critical with a dagger, target grants combat advantage to you until end of your next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Critical Opportunity",["martial","weapon"],"encounter","minor",
                [Requirement("You must have scored a critical hit with a dagger against an enemy during this turn"),
                 Target("The same creature you hit with a critical hit"),Atk([DEXMOD],"AC",damage(3,[DEXMOD]),["melee"],["daggername"])],"rogue","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Meditation of the Blade",["martial","weapon"],"daily","minor",
                [Effect("Until the end of the encounter, your dagger's damage die increases by one size.")],"rogue","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Deep Dagger Wound",["martial","weapon"],"daily","standard",
                [Trigger("An enemy hits you with a melee attack and can reach another enemy"),
                 Target("One creature"),Atk([DEXMOD],"reflex",damage(4,[DEXMOD]),["melee"],["daggername"]),
                 Hit("Ongoing 10 damage (save ends).  On a critical hit, ongoing 20 damage (save ends)"),
                 Miss("2[W]+bonus damage, and no ongoing damage.")],"rogue","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","rogue"))

,"master infiltrator":feat([ft("feat",[
        feat([ft("paragonname","master infiltrator")]),
                feat([],"Infiltrator's Action","When you spend an AP for an extra action, you also gain a move action",CHECK("level",11)),
                feat([ft("acrobatics",("",2)),ft("athletics",("",2)),ft("stealth",("",2))],"Skillful Infiltrator","Gain a +2 bonus on Acrobatics, Athletics, and Stealth checks",CHECK("level",11)),
                feat([],"Invisible Infiltrator","When you drop to 0 or score a critical hit against a target your level or higher, gain invisibility until end of your next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Distracting Wound",["martial","weapon"],"encounter","standard",
                [Target("One creature you have combat advantage against"),Atk([DEXMOD],"AC",damage(2,[DEXMOD]),[],["crossbow","light blade","sling"]),
                 Effect("Target grants combat advantage to you and all your allies until the end of your next turn.")],"rogue","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Impossible to Catch",["martial"],"encounter","minor",
                [Effect("You become invisible until the start of your next turn.")],"rogue","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Painful Puncture",["martial","weapon"],"daily","standard",
                [Trigger("An enemy hits you with a melee attack and can reach another enemy"),
                 Target("One creature"),Atk([DEXMOD],"AC",damage(3,[DEXMOD]),[],["crossbow","light blade","sling"]),
                 Hit("Ongoing 10 damage (save ends)."),
                 Miss("Half damage, and no ongoing damage.")],"rogue","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","rogue"))

,"shadow assassin":feat([ft("feat",[
        feat([ft("paragonname","shadow assassin")]),
                feat([],"Shadow Assassin's Action","When you spend an AP for an extra action, you gain a +4 bonus to attacks until the start of next turn",CHECK("level",11)),
                feat([],"Shadow Assassin's Riposte",["Any adjacent enemy that misses you with a melee attack takes ",lambda x:x.mod("dex")," damage"],CHECK("level",11)),
                feat([],"Bloody Evisceration","Gain an extra 1d6 damage when attacking a bloodied enemy",CHECK("level",16)),
                feat([ft("power",
                [Power("Killer's Eye",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([DEXMOD],"reflex",damage(2,[DEXMOD]),[],["crossbow","light blade","sling"]),
                 Effect("If this attack is made before the target has acted this encounter, increase the weapon damage to 3[W]")],"rogue","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Bad Idea, Friend",["martial"],"daily","immediate interrupt",
                [Trigger("An adjacent enemy makes a melee attack against you for the first time this encounter"),
                 Special("If you are granting combat advantage, you cannot use this power"),
                 Effect(["Gain a +10 power bonus to all defenses against the enemy's attack.  If the attack misses, the enemy takes ",lambda x:2*x.mod("dex")," damage"])],"rogue","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Final Blow",["martial","weapon"],"daily","standard",
                [Target("one bloodied creature"),Atk([DEXMOD],"reflex",damage(5,[DEXMOD]),[],["crossbow","light blade","sling"]),
                 Hit(["Shift ",lambda x:x.mod("cha")," square(s).  You must end this movement adjacent to an enemy"]),
                 Miss("Half damage, and no shift")],"rogue","daily",20)])],"","",
                 CHECK("level",20))
                 ])],
                 "paragon","",CHECK("checkclass","rogue"))
###Shaman Paragons###
,"disciple of the world serpent":feat([ft("feat",[
        feat([ft("paragonname","disciple of the world serpent")]),
                feat([],"Grasping Spirit","Enemies treat squares adjacent to your spirit companion as difficult terrain",CHECK("level",11)),
                feat([],"Spirit Shaman's Bounty","When you spend an AP for an extra action, one ally next to spirit companion can spend a healing surge",CHECK("level",11)),
                feat([],"Spirit Venom","When enemy saves against your shaman daily attack powers, that enemy takes 10 poison damage",CHECK("level",16)),
                feat([Power("Serpent'S Rebuke",["implement","primal","psychic"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"will",damage([2,8],[WISMOD])),
                             Hit("Until the end of your next turn, the target is immobilized, and any enemy that enters a square adjacent to the target takes 5 psychic damage. an enemy takes this damage only once for each use of this power.")],"shaman","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Seal Of The Serpent",["primal"],"encounter","minor",
                            [Target("One creature",("ranged",5)),
                             Effect("Choose yourself or one ally within 5 squares of you. Until the end of your next turn, that character ignores cover, superior cover, concealment, and total concealment when attacking the target. In addition, the character can make ranged attacks against the target without having line of sight or line of effect to it.")],"shaman","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Crush Of The Serpent",["implement","primal"],"daily","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"fortitude",None),
                             Hit("The target is immobilized and takes ongoing 15 damage (save ends both)."),
                             Aftereffect("The target is immobilized and takes ongoing 5 damage (save ends both)."),
                             Miss("The target is slowed and takes ongoing 5 damage (save ends both).")],"shaman","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","shaman") and x.check("power","call spirit companion"))
,"ghost panther":feat([ft("feat",[
        feat([ft("paragonname","ghost panther")]),
                feat([],"Ghost Pather's Wisdom","You and allies gain +5 to Stealth checks while next to spirit companion",CHECK("level",11)),
                feat([],"Ghost Panther Action","When you spend an AP for an extra ction, enemies adjacent to spirit companion grant combat advantage until end of your next turn",CHECK("level",11)),
                feat([ft(["acrobatics","athletics","stealth"],["",WISMOD])],"Panther Ancestors",["Gain a + ",WISMOD," bonus to Acrobatics, Athletics, and Stealth checks"],CHECK("level",16)),
                feat([Power("Predator Spirit",["implement","primal"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([WISMOD],"reflex",damage([2,6],[WISMOD])),
                             Hit("Until the end of your next turn, bloodied enemies are weakened while adjacent to your spirit companion.")],"shaman","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Great Cat's Dodge",["primal"],"encounter","immediate interrupt",
                            [Trigger("An attack misses you"),
                             Effect("You shift 3 squares.")],"shaman","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Ghost Panther Spiral",["implement","primal","teleportation","zone"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",5)),
                             Atk([WISMOD],"will",damage([5,6],[WISMOD])),
                             Miss(),
                             Effect("The burst creates a zone of rushing spirits that lasts until the end of the encounter. You or any ally who is within the zone can use a minor action to teleport to a space adjacent to an enemy that is within the zone.")],"shaman","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","shaman") and x.check("power","call spirit companion"))
,"great bear shaman":feat([ft("feat",[
        feat([ft("paragonname","great bear shaman")]),
                feat([],"Great Protector's Prowess","You and allies gain +2 bonus to damage rolls against marked enemies adjacent to your spirit companion",CHECK("level",11)),
                feat([],"Great Bear's Action","When you spend an AP for an extra action, one ally in 10 squares can make a melee basic attack as a free action",CHECK("level",11)),
                feat([],"Looming Presence","While next to your companion, allies gain a +5 power bonus to opportunity attack rolls",CHECK("level",16)),
                feat([Power("Bear Fang Defense",["implement","primal","spirit"],"encounter","standard",
                            [Target("One creature",("melee spirit",1)),
                             Atk([WISMOD],"fortitude",damage([3,10],[WISMOD])),
                             Hit(["The target is marked until the end of your next turn. until the mark ends, whenever the target makes an attack while adjacent to your spirit companion, the target takes ",damage(0,1,10)," and is knocked prone after the attack is resolved."])],"shaman","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Galvanizing Bellow",["primal"],"encounter","minor",
                            [Target("Each ally in burst",("close burst",5)),
                             Effect("Each target can shift 2 squares as a free action.")],"shaman","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Call To The Great Bear",["implement","primal","spirit"],"daily","standard",
                            [Target("One creature",("melee spirit",1)),
                             Atk([WISMOD],"reflex",damage([4,10],[WISMOD])),
                             Miss(),
                             Effect(["The target takes a -2 penalty to attack rolls, and whenever it hits with an attack, the target takes ",damage(WISMOD,1,10)," (save ends both)."])],"shaman","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","shaman") and x.check("power","call spirit companion"))
,"spirit tempest":feat([ft("feat",[
        feat([ft("paragonname","spirit tempest")]),
                feat([],"Spirit Wind Action","When you spend an AP for an extra action, each ally next to your companion can teleport 2 squares as a free action",CHECK("level",11)),
                feat([],"Healing Guides","When you restore HP with Healing Spirit, allies adjacent to or within your shaman conjuration/zone regain HP as if next to your companion",CHECK("level",11)),
                feat([],"Spirit Compatant","Gain combat advantage when using shaman at-will attacks with the Spirit keyword",CHECK("level",16)),
                feat([Power("Spirit Tide",["implement","primal","spirit"],"encounter","standard",\
                            [Target("One creature",("melee spirit",1)),
                             Atk([WISMOD],"will",damage([2,10],[WISMOD])),
                             Hit(["Each enemy within 5 squares of the target takes ",damage(0,1,10),"."])],"shaman","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Spirit Flow",["primal","teleportation"],"encounter","minor",
                            [Target("One ally in burst",("close burst",20)),
                             Effect("You teleport the target and your spirit companion, swapping their positions.")],"shaman","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Spirit Storm",["implement","primal","teleportation","zone"],"daily","standard",
                            [Target("One creature in burst",("area burst",2,10)),
                             Atk([WISMOD],"will",damage([4,8],[WISMOD])),
                             Miss(),
                             Effect("The burst creates a zone of storm spirits that lasts until the end of the encounter. While within the zone, any ally gains a +1 bonus to attack rolls and damage rolls against the target. In addition, any ally within the zone can teleport as a move action, swapping positions with another ally within the zone.")],"shaman","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","shaman") and x.check("power","call spirit companion"))
###Sorcerer Paragons###
,"arcane wellspring":feat([ft("feat",[
        feat([ft("paragonname","arcane wellspring")]),
                feat([],"Double Resistance","Choose two resistances with Dragon Soul, or roll twice for Wild Soul resistance (rerolling repeat resistances)",CHECK("level",11)),
                feat([],"Split Spell Action","You can spend an AP to target an additional creature with an arcane power that normally targets only one creature",CHECK("level",11)),
                feat([],"Antagonistic Transposition","When you use an arcane area or close attack, you can swap the position of two creatures hit by the attack before resolving it",CHECK("level",16)),
                feat([Power("Twin Bolt",["arcane","implement",";","varies"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([CHAMOD],"reflex",damage([3,10],[CHAMOD])),
                             Hit("The damage is the two types you resist with your dragon soul or wild soul class feature and with your double resistance path feature."),
                             Special(["You can choose to lose both of the resistances provided by your Dragon Soul or Wild Soul class feature and by your Double Resistance path feature for the rest of the encounter. If you do so, you can make two attacks with this power, each against a different target. Each target the attack hits takes ",damage(CHAMOD,3,12),", instead of ",damage(CHAMOD,3,10),"."])],"sorcerer","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Sorcerous Wings",["arcane",";","varies"],"encounter","minor",
                            [Effect(["Until the end of your next turn, you gain a fly speed of 6, and you can hover, and whenever an enemy makes an opportunity attack against you, that enemy takes ",damage(CHAMOD,2,10),". The damage is the two types you resist with your Dragon Soul or Wild Soul class feature and with your Double Resistance path feature."])],"sorcerer","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Sorcerous Metamorphosis",["arcane","implement",";","varies"],"daily","standard",
                            [Effect(["Until the end of your next turn, you become insubstantial, and you gain phasing. In addition, when any creature makes a melee attack against you or when you first enter a creature's space on your turn, the creature takes ",damage(CHAMOD,3,6),". The damage is the two types you resist with your Dragon Soul or Wild Soul class feature and with your Double Resistance path feature."])],"sorcerer","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","sorcerer"))
,"demonskin adept":feat([ft("feat",[
        feat([ft("paragonname","demonskin adept")]),
                feat([],"Demon Fury","When you spend an AP for an extra action, you and allies gain +3 to attack rolls, and enemies gain +3 to attack rolls against you, until start of your next turn",CHECK("level",11)),
                feat([],"Variable Resistance","1/encounter as minor act, change damage type of Dragon Soul or Wild Soul feature to a different choice available from that feature",CHECK("level",11)),
                feat([],"Glimpse of the Abyss","When you score a critical hit, you and the target are blinded until the start of your next turn",CHECK("level",16)),
                feat([Power("Demon-Soul Bolts",["arcane","implement","thunder"],"encounter","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([CHAMOD],"fortitude",damage([1,8],[CHAMOD])),
                             Hit("You slide the target 1 square."),
                             Effect("Make the attack two more times against the same target or different ones.")],"sorcerer","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Demonic Wrath",["arcane"],"daily","minor",
                            [Requirement("You must be bloodied."),
                             Effect("Until the end of the encounter, while you're bloodied, your arcane attacks deal 1d6 extra damage on a hit.")],"sorcerer","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Swords Of The Marilith",["arcane","implement","zone"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",3)),
                            Atk([CHAMOD],"reflex",damage([3,6],[CHAMOD])),
                            Effect("The burst creates a zone of whirling blades that lasts until the end of your next turn. When the zone appears, choose its effect:"),
                            Line(["* Any enemy takes ",damage(CHAMOD,3,6)," if it starts its turn within the zone."]),
                            Line(["* Any enemy takes ",damage(CHAMOD,1,6)," if it starts its turn within the zone. While within the zone, you and your allies gain a +4 power bonus to AC."]),
                            Sustain("minor"," The zone persists, and you can change its effect.")],"sorcerer","daily","20")],"","",
                            CHECK("level",20))])],
                 "paragon","",CHECK("checkclass","sorcerer"))
,"dragonsoul heir":feat([ft("feat",[
        feat([ft("paragonname","dragonsoul heir")]),
                feat([ft("surges",["",2])],"Draconic Durability","Your number of healing surges per day increases by two",CHECK("level",11)),
                feat([],"Draconic Resilience",["When you spend an AP for an extra action, gain ",lambda x:x.statret("level")/2," temporary HP"],CHECK("level",11)),
                feat([ft("dragon soul resistance",["",10])],"Dragon Soul Resistance","The resistance provided by your Dragon Soul class feature increases by 10",CHECK("level",16)),
                feat([Power("Breath Of The Dragon Soul",["arcane","implement",";","varies"],"encounter","standard",
                            [Target("Each creature in blast",("close blast",5)),
                             Atk([CHAMOD],"reflex",damage([2,8],[CHAMOD])),
                             Hit("The damage is the type you resist with your dragon soul class feature.")],"sorcerer","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Dragon's Revenge",["arcane","varies"],"daily","minor",
                            [Effect(["Until the end of the encounter, when any enemy hits or misses you with an attack against AC, that enemy takes ",damage(STRMOD,1,10),". The damage is the type you resist with your Dragon Soul class feature."])],"sorcerer","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Veil Of The Dragon",["arcane","implement; varies"],"daily","standard",
                            [Target("Each enemy in burst",("close burst",3)),
                             Atk([CHAMOD],"reflex",damage([6,6],[CHAMOD])),
                             Effect(["Until the end of your next turn, any creature that makes a melee attack against you takes ",damage(CHAMOD,2,6),". In addition, you can make the following attack, which can be used as a melee basic attack."]),
                             Other("Standard Action"),
                             Target("One creature",("melee",1)),
                             Atk([CHAMOD],"reflex",damage([4,6],[CHAMOD])),
                             Sustain("minor"," The effect persists."),
                             Special("The damage dealt by this power is the type you resist with your Dragon Soul class feature.")],"sorcerer","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","sorcerer") and x.check("feature","dragon magic"))
,"wild mage":feat([ft("feat",[
        feat([ft("paragonname","wild mage")]),
                feat([],"Chaos Action","When you spend an AP for an extra action, you can roll for a random effect",CHECK("level",11)),
                feat([],"Wild Surge","When you roll a 1 on an attack roll, take normal miss effect and Unfettered Power class feature, or roll for random result instead",CHECK("level",11)),
                feat([],"Critical Surge","Deal 1d10 extra damage on a critical hit",CHECK("level",16)),
                feat([Power("Tempest Surge",["arcane","implement"],"encounter","standard",
                            [Special("Pick the burst's origin square before rolling to determine the burst's size.",("area burst","1d4",20)),
                             Target("Each creature in burst. Roll a d4, and you can exclude a number of targets equal to the result."),
                             Atk([CHAMOD],"reflex",damage([3,8],[CHAMOD]))],"sorcerer","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Torrent Of Power",["arcane"],"daily","minor",
                            [Effect("Until the end of the encounter, whenever you roll the highest number on any damage die, roll that die again and add its result to the damage total.")],"sorcerer","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Prismatic Bolt",["arcane","implement; varies"],"daily","standard",
                            [Target("One creature",("ranged",10)),
                             Atk([CHAMOD],"reflex",damage([5,8],[CHAMOD])),
                             Hit("Roll a d6 to determine the attack's damage type and effect."),
                             Line("1. Yellow:  Radiant damage, and your ally nearest to the target can spend a healing surge."),
                             Line("2. Black:  Necrotic damage, and the target is weakened (save ends)."),
                             Line("3. Green:  Poison damage, and the target takes ongoing 15 poison damage (save ends)."),
                             Line("4. White:  Force damage, and the target is restrained (save ends)."),
                             Line("5. Blue:  Cold damage, and the target is stunned (save ends)."),
                             Line("6. Violet:  Psychic damage, and the target is dominated (save ends)."),
                             Miss(["",damage(0,3,8),". Roll a d6 to determine the attack's damage type and effect, as above."])],"sorcerer","daily","20")],"","",
                             CHECK("level",20))])],
                 "paragon","",lambda x:x.check("checkclass","sorcerer") and x.check("feature","wild magic"))
###Warlock Paragons###
,"darkwalker":feat([ft("feat",[
        feat([ft("paragonname","darkwalker")]),
                feat([],"Deadly Absence",["While you are insubstantial, gain a +",INTMOD," bonus to damage with warlock powers"],CHECK("level",11)),
                feat([],"Darkwalker Action","Instead of spending an AP for an extra action, you can become insubstantial until start of next turn",CHECK("level",11)),
                feat([],"Ghostken","Your attacks against insubstantial creatures deal normal (not half) damage",CHECK("level",16)),
                feat([ft("power",
                [Power("Ghostly Bane",["arcane","implement","necrotic"],"encounter","standard",
                [Target("one creature",("ranged",5)),Atk([CHAMOD],"fortitude",damage([2,10], [CHAMOD])),
                 Hit("You become insubstantial until the end of your next turn.")],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Fading Spiral",["arcane"],"encounter","free",
                [Effect("Use this power when you use your Darkspiral aura.  You become insubstantial until the end of your next turn.",("ranged",5))],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Wraithform Blast",["arcane","implement","necrotic","psychic"],"daily","standard",
                [Target("one creature",("ranged",20)),Atk([CHAMOD],"will",damage([4,10], [CHAMOD])),
                 Hit("Ongoing 10 psychic and necrotic damage (save ends)."),
                 Effect("You become insubstantial and gain phasing.  These benefits last until the end of the encounter or until you become bloodied.")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock") and x.check("feature","dark pact"))

,"doomsayer":feat([ft("feat",[
        feat([ft("paragonname","doomsayer")]),
                feat([],"Doomsayer's Action","When you spend an AP to take an extra action deal warlocks curse damage to all cursed enemies",CHECK("level",11)),
                feat([],"Doomsayer's Proclamation","Enemies within 10 squares must take the worse of 2 rolls when rolling saves vs. fear",CHECK("level",11)),
                feat([],"Doomsayer's Oath","+2 power bonus to attack rolls with fear powers when bloodied",CHECK("level",16)),
                feat([ft("power",
                [Power("Fates Entwined",["arcane","fear","implement","psychic"],"encounter","standard",
                [Target("one creature",("ranged",5)),Atk([CHAMOD],"will",damage([2,8], [CHAMOD])),
                 Hit("Until the end of your next turn, when you take damage, the target takes half that amount of psychic damage")],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Accursed Shroud",["arcane"],"daily","standard",
                [Target("one creature",("ranged",5)),
                 Effect("You place your Warlock's Curse upon the target.  In addition, it must reroll any successful attack it makes while affected by your curse and take the new result (save ends).")],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Long Fall Into Darkness",["arcane","fear","illusion","implement","psychic"],"daily","standard",
                [Target("one creature",("ranged",20)),Atk([CHAMOD],"will",damage([4,8], [CHAMOD])),
                 Hit("Target is stunned until the ned of its next turn and knocked prone."),
                 Miss("Half damage, and the target is dazed until the end of its next turn.")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock") and x.check("feature","star pact"))

,"entrancing mystic":feat([ft("feat",[
        feat([ft("paragonname","entrancing mystic")]),
                feat([],"Maddening Action","When you spend an AP to take an extra action, one creature within 5 squares of you takes ongoing 5 psychic damage (save ends).",CHECK("level",11)),
                feat([],"Mystic Rapture","Each enemy starting in or entering a square within 3 of you takes a -5 to saves vs. charm and -2 to all other saves",CHECK("level",11)),
                feat([],"Mystery Given Form","+1 bonus to attack rolls with charm powers.  Do not expend encounter charm powers if you miss all targets.",CHECK("level",16)),
                feat([ft("power",
                [Power("Hekiah's Trance",["arcane","charm","implement","psychic"],"encounter","standard",
                [Target("one creature",("ranged",5)),Atk([CHAMOD],"will",damage([1,8], [CHAMOD])),
                 Hit(["Slide the target ",CHAMOD," squares.  The target is slowed until the end of your next turn."])],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Shroud of Adeptus",["arcane","charm"],"daily","immediate reaction",
                [Trigger("An enemy within 5 squares of you misses you with an attack."),
                 Target("The triggering enemy"),Effect("The target is dazed until the end of your next turn.")],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Ultimatum of the Third Order",["arcane","charm","implement","psychic"],"daily","standard",
                [Target("each enemy in burst",("close burst",5)),Atk([CHAMOD],"will",None),
                 Hit("The target chooses either to be stunned until the end of your next turn, or to take ongoing 20 psychic damage (save ends)."),
                 Hit("The target chooses either to be dazed until the end of your next turn, or to take ongoing 10 psychic damage (save ends).")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock"))

,"feytouched":feat([ft("feat",[
        feat([ft("paragonname","feytouched")]),
                feat([],"Feytouched Action","When you spend an AP for an extra action gain +4 to attack rolls until end of next turn",CHECK("level",11)),
                feat([],"Slashing Wake",["1/turn, when you leave a square by teleporting, enemies adjacent to that square take ",INTMOD," damage"],CHECK("level",11)),
                feat([],"Patron's Favor","Roll for misty step rewards: 1-2: normal, 3: saving throw, 4: Teleport 10, 5: +2 speed, 6: roll d8's for curse for encounter.",CHECK("level",16)),
                feat([ft("power",
                [Power("Will of the Feywild",["arcane","charm","implement","psychic","teleportation"],"encounter","standard",
                [Target("one creature",("ranged",10)),Atk([CHAMOD],"will",damage([2,8], [CHAMOD])),
                 Hit("You can teleport the target 5 squares, whereupon it makes a melee basic attack against a creature of your choice."),
                 Effect("The target is dazed until the end of its next turn")],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Twilight Teleport",["arcane","teleportation"],"daily","standard",
                [Trigger("A creature within range and affected by your Warlock's Curse drops to 0 hit points or fewer",("ranged", 20)),
                 Effect("You teleport yourself or another creature into the triggering creature's space.")],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Whispers of the Fey",["arcane","implement","psychic"],"daily","standard",
                [Target("one creature",("close burst",5)),Atk([CHAMOD],"will",damage([2,8], [CHAMOD])),
                 Hit("The target must make a basic attack against its nearest ally (you choose the target if there are multiple possible targets).  It only takes damage from this power if it cannot make the attack."),
                 Effect("After the target makes its attack or takes psychic damage, the target is dazed (save ends).")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock") and x.check("feature","fey pact"))

,"life-stealer":feat([ft("feat",[
        feat([ft("paragonname","life-stealer")]),
                feat([],"Infernal Action","When you spend an AP for an extra action, if you hit during that action deal ongoing 5 fire damage (save ends)",CHECK("level",11)),
                feat([],"Collect Life Spark","Collect life sparks when creatures under your curse die, expend as minor action for various benefits",CHECK("level",11)),
                feat([],"Sustain Life Spark","If you have more life sparks at the end of an encounter than surges, regain hit points as if you spent a healing surge.",CHECK("level",16)),
                feat([ft("power",
                [Power("Soul Scorch",["arcane","fire","implement","necrotic"],"encounter","standard",
                [Target("one creature",("ranged",10)),Atk([CONMOD],"will",damage([3,8], [CONMOD])),
                 Effect("If the target creature has the same origin as a life spark you possess, you can expend that life spark to deal an extra 10 damage to the target.")],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Life Spark Summons",["arcane"],"encounter","standard",
                [Effect("Expend a life spark you possess.  Place the creature from which you received the life spark back in the encounter within the power's range.  It has 10 hit points and acts on your next turn with a full set of actions as an independent creature that you control.  The creature can do nothing except make basic attacks and move.  It drops to 0 hit points again, dies, and fades away at the end of your next turn.")],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Soultheft",["arcane","implement","necrotic"],"encounter","standard",
                [Target("one, two, or three creature",("ranged",5)),Atk([CONMOD],"fortitude",damage([3,8], [CONMOD])),
                 Hit("You gain a life spark from any target that drops to 0 or fewer hit points as a result of this attack."),
                 Miss("Half damage, and no life spark.")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock") and x.check("feature","infernal pact"))

,"master of the starry night":feat([ft("feat",[
        feat([ft("paragonname","master of the starry night")]),
                feat([],"Starcrossed Action","When you spend an AP, one creature cursed by you is dazed until the end of your next turn",CHECK("level",11)),
                feat([],"Star-Blessed Wanderer","If you use the bonus from Fate of the Void pact and miss, you retain the bonus until end of your next turn",CHECK("level",11)),
                feat([],"Fate of the Bloody","As a free act on your turn, expend Fate of the Void bonus as bonus to speed or one defense until end of your next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Stellar Debris",["arcane", "fire", "implement", "radiant"],"encounter","standard",
                [Target("each creature in blast",("close blast",5)),Atk([CONMOD],"reflex",damage([1,8],[CONMOD])),
                 Hit("Until the end of your next turn, the target treats all creatures as having concealment.")],"warlock","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Minor Gift of Foresight",["arcane"],"encounter","free",
                [Effect("You remove any number of Warlock's Curses you have placed on your enemies and gain the benefits of their pact boon as if each of those creatures had been reduced to 0 hit points.")],"warlock","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Shooting Star",["arcane","implement","radiant"],"daily","standard",
                [Target("one creature",("ranged",20)),Atk([CHAMOD],"reflex",damage([4,10],[CHAMOD])),
                 Hit("Until the end of the encounter, whenever you hit the target, it takes 2d6 extra radiant damage."),
                 Miss("Half damage.  Until the end of your next turn, whenever you hit the target, it takes 2d6 extra radiant damage.")],"warlock","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlock") and x.check("feature","star pact"))
###Warlord Paragons###
,"battle captain":feat([ft("feat",[
        feat([ft("paragonname","battle captain")]),
                feat([],"Battle Action","When you spend an AP for an action, allies that can see and hear you gain +1 to attacks until the start of next turn",CHECK("level",11)),
                feat([],"Cry Havoc","On surprise round and first round of battle allies starting in 10 squares gain +2 to attack rolls",CHECK("level",11)),
                feat([],"Battle Inspiration",["When you use inspiring word, targets gain ",plus(lambda x:1+((x.mod("int")-1)*x.check("feature","tactical presence")))," power bonus to attack rolls & speed until the end of your next turn"],CHECK("level",16)),
                feat([ft("power",
                [Power("Force Retreat",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"reflex",damage(1,[STRMOD]),["melee"]),
                 Hit(["Push the target ",INTMOD," squares.  Make a secondary attack"]),
                 Target("Each enemy that was adjacent to the primary target, is its size or smaller, and is within your melee reach"),Atk([STRMOD],"fortitude",damage([2,6],[STRMOD]),["melee"]),
                 Hit("Push the secondary target 1 square.")],"warlord","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Bolt of Genius",["martial"],"daily","standard",
                [Target("one ally",("ranged",5)),Effect("The target regains an encounter power he or she has already used")],"warlord","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Cunning Flurry",["martial","weapon"],"daily","standard",
                [Target("each enemy in burst you can see"),Atk([STRMOD],"AC",damage(2,[STRMOD]),[]),
                 Hit("Push the target 1 square or knock it prone"),
                 Miss("Half damage, no push, and the target is not knocked prone.")],"warlord","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warlord"))

,"combat veteran":feat([ft("feat",[
        feat([ft("paragonname","combat veteran")]),
                feat([],"Combat Veteran's Action","When you spend an AP for an extra action, one ally in 10 squares can take a move action",CHECK("level",11)),
                feat([ft("surges",("",1)),ft("surge",("",CONMOD))],"Tough as Nails",["Gain an extra healing surge.  When you spend a surge, gain an extra ",CONMOD," hp"],CHECK("level",11)),
                feat([],"Battle Healer","When you use Inspiring Word, the target can also make a saving throw",CHECK("level",16)),
                feat([ft("power",
                [Power("Skirmish Ploy",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"reflex",damage(1,[STRMOD]),["melee"]),
                 Hit("The target is dazed until the end of your next turn.  In addition, you slide the target 2 squares, and an ally within 2 squares of you shifts 1 square nearer to the target.")],"warlord","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Miss Me Once",["martial"],"encounter","immediate interrupt",
                [Trigger("An enemy within range and in your line of sight misses you with an attack",("ranged",10)),
                 Effect("The enemy grants combat advantage to each ally who has line of sight to it until the start of its next turn.")],"warlord","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Superior Tactics",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"reflex",damage(3,[STRMOD]),["melee"]),
                 Hit("You grant an action point to one ally within 10 squares of you.  The action point disappears if it's not used by the end of the encounter."),
                 Miss("An ally within 10 squares of you makes a basic attack as a free action.")],"warlord","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warlord"))

,"knight commander":feat([ft("feat",[
        feat([ft("paragonname","knight commander")]),
                feat([],"Honor and Glory","Allies gain a +2 bonus to attack rolls when they are adjacent to you.",CHECK("level",11)),
                feat([],"Knight Commander's Action","When you spend an AP to take an action, allies who can see / hear you gain +1 to defenses until start of next turn",CHECK("level",11)),
                feat([],"Press of Arms",["You and allies in 3 squares of you gain ",CHAMOD," bonus to damage rolls when making opportunity attacks"],CHECK("level",16)),
                feat([ft("power",
                [Power("Slash and Press",["martial","weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Effect("After making the attack, you push all adjacent enemies 1 square")],"warlord","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Break Their Nerve",["martial"],"encounter","minor",
                [Target("One enemy",("melee",1)),Effect("The target is marked until the end of your next turn")],"warlord","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Control the Field",["martial","weapon"],"daily","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                 Effect(["All of your enemies within 5 squares of you are marked until the end of your next turn.  All enemies take ",CHAMOD," ongoing damage while the mark lasts."])],"warlord","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlord") and (x.check("proficiency","chainmail") or x.check("proficiency","scale") or x.check("proficiency","plate")))

,"sword marshal":feat([ft("feat",[
        feat([ft("paragonname","sword marshal")]),
                feat([],"Disciplined Blade","When you miss in melee with a heavy blade, gain +2 to next attack roll against that enemy.",CHECK("level",11)),
                feat([],"Sword Marshal's Action","You can spend an action point to regain one warlord encounter power instead of an extra action",CHECK("level",11)),
                feat([],"Skewer the Weak","When you score a critical with a heavy blade, you + allies gain combat advantage against target until end of next turn",CHECK("level",16)),
                feat([Power("Blade Flurry",["martial","weapon"],"encounter","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["heavy blade","melee"]),
                             Hit("Shift 1 square.  Make a secondary attack"),
                             Target("one creature"),Atk([STRMOD],"AC",damage(1,[STRMOD]),["heavy blade","melee"])],"warlord","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Sword Marshall's Boon",["martial"],"daily","free",
                            [Trigger("You use a power that targets your allies but not you"),
                             Effect("You are also targeted by that power")],"warlord","utility",12)],"","",
                             CHECK("level",12)),
                feat([Power("Diamond Blade of Victory",["martial","weapon"],"daily","standard",
                            [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["heavy blade","melee"]),
                             Special("For each ally within 2 squares of you, deal an extra 1[W] damage (max of +4[W] damage)"),
                             Miss()],"warlord","daily",20)],"","",
                             CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","warlord") and sum([z in x.statret("proficiency") for z in weaponKeyList("heavy blade")])>0)
###Warden Paragons###
,"bloodwrath guardian":feat([ft("feat",[
        feat([ft("paragonname","bloodwrath guardian")]),
                feat([],"Furious Action",["Spend AP to gain +",WISMOD," bonus to attack rolls until end of your turn"],CHECK("level",11)),
                feat([],"Bloodwrath Stride","+2 speed while in a guardian form",CHECK("level",11)),
                feat([],"Bloodwrath Fury","+2 damage rolls when hitting an enemy marked by you with a melee attack",CHECK("level",16)),
                feat([ft("power",
                [Power("Bloodwrath Strike",["primal","weapon"],"encounter","standard",
                       [Target("One creature"),
                        Atk([STRMOD],"fortitude",damage(3,[STRMOD]),["melee"])],"warden","encounter","11")])],"","",
                        CHECK("level",11)),
                feat([ft("power",
                [Power("Warding Frenzy",["primal","stance"],"daily","minor",
                       [Effect("Until the stance ends, any enemy that starts or ends its turn adjacent to you is marked until the end of its next turn.")],"warden","utility","12")])],"","",
                       CHECK("level",12)),
                feat([ft("power",
                [Power("Form Of The Primal Beast",["polymorph","primal","weapon"],"daily","minor",
                       [Effect("You assume the guardian form of the Primal Beast until the end of the encounter. While you are in this form, your melee reach increases by 1, and you gain threatening reach. Once during this encounter, you can make the following weapon attack while you are in this form."),
                        Other("Standard Action"),
                        Target("One creature"),
                        Atk([STRMOD],"AC",damage(3,[STRMOD]),["melee"]),
                        Hit("Ongoing 10 damage (save ends).")],"warden","daily","20")])],"","",
                        CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warden"))
,"horned champion":feat([ft("feat",[
        feat([ft("paragonname","horned champion")]),
                feat([],"Vicious Action","When spending AP to make an attack, can reroll attack if it misses",CHECK("level",11)),
                feat([],"Fervent Pursuit","Enemy hit with your opportunity attacks are slowed until end of its turn",CHECK("level",11)),
                feat([],"Blessing of Spring","Can spend healing surge as free action after using a daily attack power with the Polymorph keyword",CHECK("level",16)),
                feat([Power("Zealous Strike",["primal","weapon"],"encounter","standard",
                            [Target("One creature"),Atk([STRMOD],"AC",damage(1,[STRMOD]),["melee"]),
                             Special("If the target is bloodied, you gain a +2 bonus to the attack roll."),
                             Hit("You knock the target prone."),
                             Effect("Make the attack one more time against the same target or a different one.")],"warden","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Impetuous Stride",["primal"],"encounter","move",
                            [Effect(["You move your speed. If any creature makes an opportunity attack against you during this movement, that creature takes ",MOD("wis",5)," damage."])],"warden","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Form Of The Leaping Stag",["polymorph","primal","weapon"],"daily","minor",
                            [Effect("You assume the guardian form of the leaping stag until the end of the encounter. While you are in this form, you gain a +4 bonus to speed. In addition, as a move action, you can move your speed and gain a +2 power bonus to AC against opportunity attacks until the end of your turn. During this movement, you can move through any enemy's space, marking that enemy until the end of your next turn. Once during this encounter, you can make the following weapon attack while you are in this form."),
                             Other("Standard Action"),
                             Effect("Before the attack, you move your speed."),
                             Target("One creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),["melee"]),
                             Hit("The target is stunned until the end of your next turn."),
                             Miss("Half damage, and the target is dazed until the end of your next turn.")],"warden","daily","20")],"","",
                             CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warden"))
,"storm sentinel":feat([ft("feat",[
        feat([ft("paragonname","storm sentinel")]),
                feat([],"Invigorating Action","Can spend healing surge as free action after spending action point to attack",CHECK("level",11)),
                feat([],"Critical Jolt",["Deal ",STRMOD," extra lightning damage on a critical hit"],CHECK("level",11)),
                feat([ft("surge",["",CONMOD])],"Undying Wind",["Whenever you spend a healing surge, heal ",CONMOD," extra hit points"],CHECK("level",16)),
                feat([Power("Thunder Smash",["primal","thunder","weapon"],"encounter","standard",
                            [Target("Each enemy in burst",("close burst",2)),Atk([STRMOD],"fortitude",damage(1,[STRMOD]),[]),
                             Hit("You knock the target prone.")],"warden","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Storm Step",["primal"],"encounter","move",
                            [Effect("You become insubstantial until the end of your next turn. In addition, you fly your speed; at the end of this movement, you must land in a space adjacent to an enemy.")],"warden","utility","12")],"","",
                            CHECK("level",12)),
                feat([Power("Form Of Storm's Wrath",["lightning","polymorph","primal"],"daily","minor",
                       [Effect(["You assume the guardian form of storm's wrath until the end of the encounter. While you are in this form, any enemy that starts its turn adjacent to you is marked until the end of your next turn and takes ",MOD("con"), " lightning damage if you are able to take actions. In addition, at the start of each of your turns, choose one enemy that you can see within 3 squares of you. That enemy takes ",MOD("con",5)," lightning damage."])],"warden","daily","20")],"","",
                        CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warden"))
,"verdant lord":feat([ft("feat",[
        feat([ft("paragonname","verdant lord")]),
                feat([],"Reaching Action","When you spend an AP for an extra action in guardian form, melee reach increases by 1 until the end of your turn",CHECK("level",11)),
                feat([],"Writhing Roots","While in guardian form, squares adjacent to you are difficult terrain and adjacent allies gain +1 AC",CHECK("level",11)),
                feat([],"Iron Boughs","+2 damage rolls when hitting an enemy marked by you with a melee attack",CHECK("level",16)),
                feat([Power("Falling Tree Strike",["primal","weapon"],"encounter","standard",
                            [Target("One creature"),Atk([STRMOD],"reflex",damage(2,[STRMOD]),["melee"]),
                             Hit("You knock the target prone.")],"warden","encounter","11")],"","",
                             CHECK("level",11)),
                feat([Power("Awaken The Forest",["primal","zone"],"daily","standard",
                            [Effect("The burst creates a zone of thick vines that lasts until the end of your next turn. The zone is difficult terrain for your enemies. In addition, your allies have cover while within the zone. As a move action, you can move the zone 5 squares.",("close burst",3)),
                             Sustain()],"warden","utility","12")],"","",
                             CHECK("level",12)),
                feat([Power("Form Of The Verdant Lord",["healing","polymorph","primal"],"daily","minor",
                            [Effect("You assume the guardian form of the verdant lord. While you are in this form, your melee reach increases by 1, you gain a +5 bonus to Strength checks to break objects, and your attacks deal triple damage to objects. In addition, at the start of each of your turns, each ally within 2 squares of you regains 5 hit points. Once during this encounter, you can make the following weapon attack while you are in this form."),
                             Other("Standard Action"),
                             Target("One creature"),
                             Atk([STRMOD],"fortitude",damage(3,[STRMOD]),["melee"]),
                             Hit("The target is immobilized (save ends)."),
                             Miss("Half damage, and the target is immobilized until the end of your next turn.")],"warden","daily","20")],"","",
                             CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","warden"))
###Wizard Paragons###
,"battle mage":feat([ft("feat",[
        feat([ft("paragonname","battle mage")]),
        #Arcane Riposte - add in power
                feat([],"Arcane Riposte","Can make special opportunity attacks",CHECK("level",11)),
                feat([],"Battle Mage Action","When you spend an AP to take an extra action, gain +4 to attack rolls until start of next turn",CHECK("level",11)),
                feat([],"Battle Edge","When first bloodied in an encounter, may use any at-will power as immediate reaction",CHECK("level",16)),
                feat([ft("power",
                [Power("Forceful Retort",["arcane","force","implement"],"encounter","standard",
                [Target("each enemy in burst",("close burst",1)),Atk([INTMOD],"fortitude",damage([3,8], [INTMOD])),
                 Hit("Push the target 1 square and knock it prone")],"wizard","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Arcane Rejuvination",["arcane","healing"],"daily","immediate interrupt",
                [Trigger("You are reduced to 0 hit points or fewer"),
                 Effect(["You regain ",lambda x:x.statret("level")+x.mod("int")," hit points."])],"wizard","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Closing Spell",["arcane","implement",";","cold","lightning","fire","or","thunder"],"daily","standard",
                [Target("each enemy in burst",("close burst",1)),Atk([INTMOD],"reflex",damage([3,10], [INTMOD])),
                 Hit("Choose one damage type from the list; this power deals that damage type.  Add 5d10 of the same damage type if you have no more daily powers remaining."),
                 Miss("Half damage")
                 ],"wizard","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","wizard"))

,"blood mage":feat([ft("feat",[
        feat([ft("paragonname","blood mage")]),
                feat([],"Blood Action","When you spend an AP for an action, if you hit with an attack during that action it deals ongoing 10 damage (save ends).",CHECK("level",11)),
                feat([],"Bolstering Blood","1/turn free action: deal 1d10 or 2d10 damage to yourself, deal equal psychic damage to targets hit by your power.",CHECK("level",11)),
                feat([],"Burning Blood",["When you use second wind, enemies in 10 squares take ",CONMOD," damage, +",INTMOD," if suffering from your effect, and ongoing 5 fire (save ends)"],CHECK("level",16)),
                feat([ft("power",
                [Power("Blood Pulse",["arcane","implement"],"encounter","standard",
                [Target("each enemy in burst",("area burst",3,20)),Atk([INTMOD],"will",damage([2,6], [INTMOD])),
                 Hit("Until the end of your next turn the target takes 5 damage for every square it moves willingly.")],"wizard","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Soul Burn",["arcane"],"daily","minor",
                [Effect("You spend a healing surge.  Instead of regaining hit points, you regain one encounter power you have already used.")],"wizard","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Destructive Salutation",["arcane","implement","psychic"],"daily","standard",
                [Target("each enemy in burst",("area burst",3,20)),Atk([INTMOD],"will",damage([6,6], [INTMOD])),
                 Hit("the target takes ongoing 10 psychic damage and is stunned (save ends both)"),
                 Miss("half damage, no ongoing damage, and target is stunned until the end of your next turn.")],"wizard","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","wizard"))

,"spellstorm mage":feat([ft("feat",[
        feat([ft("paragonname","spellstorm mage")]),
                feat([],"Extra Damage Action",["When you spend an AP for an extra action add ",lambda x:x.statret("level")/2," to the damage from standard action attacks this turn"],CHECK("level",11)),
                feat([],"Storm Spell","1/day make wisdom check to recover expeded spells (1-10: encounter utiltiy, 11-15: attack utility, 16-20: daily utility, 21+: daily attack",CHECK("level",11)),
                feat([],"Storm Fury",["When you first become blooded in an encounter deal ",lambda x:x.mod("wis")+5," lightning damage to enemies within 10 squares of you"],CHECK("level",16)),
                feat([ft("power",
                [Power("Storm Cage",["arcane","conjuration","implement","lightning","thunder"],"encounter","standard",
                [Target("each creature in burst",("area burst",2,20)),Atk([INTMOD],"reflex",damage([4,6], [INTMOD])),
                 Effect("You conjure a wall in the 16 outer squares of the burst (forming a square enclosure).  Any creature that starts its turn adjacent to the wall or moves into a wall square takes 10 lightning damage. Moving into a wall costs 1 extra square of movement.  The wall does not grant cover or concealment.  It lasts until the end of your next turn.")],"wizard","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Sudden Storm",["arcane","zone"],"daily","standard",
                [Effect("The burst creates a zone of wind and rain that lasts until the end of your next turn.  Squares in the zone are difficult terrain and are lightly obscured.  As a move action, you can move the zone up to 5 squares.",("area burst",2,20)),
                 Sustain("minor","The zone persists")],"wizard","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Maelstrom of Chaos",["arcane","force","implement","teleportation"],"daily","standard",
                [Target("each enemy in burst",("close burst",10)),Atk([INTMOD],"fortitude",damage([3,8], [INTMOD])),
                 Hit("you can teleport the target to a location of your choice within the burst."),
                 Miss("Half damage, and no teleportation.")],"wizard","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkclass","wizard"))
,"wizard of the spiral tower":feat([ft("feat",[
        feat([ft("paragonname","wizard of the spiral tower")]),
                feat([specialMenu(["orb","staff","wand"],[feat([ft(x,("enhancement",lambda z: max([(q.desc.name=="longsword" and "equipped" in q.desc.keys)*q.desc.enchantment for q in z.inventory.weapons()])))]) for x in ["orb","staff","wand"]],"Use a longsword as an arcane implement (",")")],"Corellon's Implement","",CHECK("level",11)),
                feat([],"Spiral Tower Action","Can spend an action point to regain one wizard encounter power, instead of an extra action",CHECK("level",11)),
                feat([],"Radiant Censure",["When an enemy attacks your Will defense it takes ",lambda x:max([1,x.mod("cha")])," radiant damage"],CHECK("level",16)),
                feat([ft("power",
                [Power("The One Sword",["arcane", "weapon"],"encounter","standard",
                [Target("one creature"),Atk([INTMOD],"reflex",damage(2,[INTMOD]),["melee"]),
                 Hit("Make a secondary attack against the target"),
                 Target("one creature"),Atk([INTMOD],"will",None,["melee"]),
                 Hit("The target is dazed until the end of your next turn.  This power is not expended.")
                 ],"wizard","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Shape the Dream",["arcane","implement"],"daily","immediate interrupt",
                [Trigger("You are hit by an attack against your Will defense."),
                 Effect("The attack doesn't occur, as if the creature that attacked you chose to do nothing with its action.")],"wizard","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Corellon's Blade",["arcane","radiant","teleportation","weapon"],"daily","standard",
                [Target("each enemy in burst you can see",("close burst",1)),Atk([INTMOD,4],"will",damage(3,[INTMOD]),[]),
                 Hit("The target is transported to a remote but non-threatening corner of the Feywild until the end of your next turn.  Return the creature to its original space.  If that space is occupied, the target returns to the nearest unoccupied space (its choice)."),
                 Miss("Half damage")],"wizard","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x:x.check("checkclass","wizard") and x.check("proficiency","longsword"))
###Any Divine Class###
,"exorcist of the silver flame":feat([ft("feat",[
        feat([ft("paragonname","exorcist of the silver flame")]),
                feat([],"Silver Flame Action","When you spend an AP for an extra action your attacks deal 2d6 extra fire and radiant damage until end of your next turn",CHECK("level",11)),
                feat([],"Bolstered by Flame",["Whenever you use a fire power, you and one ally in 5 squares gain ",WISMOD," temporary hit points"],CHECK("level",11)),
                feat([],"Silver Exorcism","When you attack a demon, devil, shapechanger, or undead using a fire or radiant power, you can reroll any damage die roll of 1 or 2",CHECK("level",16)),
                feat([ft("power",
                [Power("Flame of Censure",["divine","fire","implement","radiant"],"encounter","standard",
                [Target("each enemy in blast",("close blast",3)),Atk([WISMOD],"fortitude",damage([2,6], [WISMOD])),
                 Hit(["The target is blinded until the end of your next turn. If the target is a demon, a devil, a shapechanger, or an undead, it takes 2d6 extra fire and radiant damage and -",MOD("cha")," a penalty to AC until the end of your next turn."])],"paragon","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Warding Flame",["divine","zone"],"daily","standard",
                [Effect("The burst creates a zone of silver flame that lasts until the end of your next turn. You and each ally within the zone gain resist 10 fire, resist 10 radiant, and a +2 power bonus to all defenses. Each enemy within the zone gains vulnerable 5 fire and vulnerable 5 radiant, and takes a -2 penalty to all defenses.",("area burst",2,10)),
                 Sustain("minor","The zone persists")],"paragon","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Silver Brand",["divine","fire","implement","radiant"],"daily","standard",
                [Target("one creature",("ranged",10)),Atk([WISMOD],"fortitude",damage([2,6], [WISMOD])),
                 Hit("The target is blinded and dazed (save ends both). If the target is a demon, a devil, a shapechanger, or an undead, it also takes ongoing 10 fire damage and ongoing 10 radiant damage (save ends both)."),
                 Miss("Half damage, and the target is blinded and dazed until the end of your next turn.")],"paragon","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x: x.check("checkclass",divineclasses,True) and x.check("deity","the silver flame"))
###Any Primal Class###
,"gatekeeper mystagogue":feat([ft("feat",[
        feat([ft("paragonname","gatekeeper mystagogue")]),
                feat([],"Resolute Action","When you spend an AP for an extra action, gain resist 20 psychci until end of your next turn; you + each adjacent ally make a saving throw against any psycic effects",CHECK("level",11)),
                feat([],"Aberrant Bane","Your attacks against bloodied aberrant creatures can score critical hits on rolls of 19-20",CHECK("level",11)),
                feat([],"Aberrant Disruption","Critical hit against an aberrant creature stuns that creature until end of your next turn",CHECK("level",16)),
                feat([ft("power",
                [Power("Nature's Balance",["poison","primal"],"encounter","standard",
                [Target("one creature in burst",("close burst",5)),Atk([lambda x:max(x.mod("wis"),x.mod("str")),raising(2,10)],"fortitude",damage([2,8], [CONMOD])),
                 Hit("The target and each enemy adjacent to it gain vulerable 5 to all damage until the end of your next turn.")],"paragon","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Gate Seal",["primal","zone"],"daily","minor",
                [Effect("The burst creates a zone of primal interference that lasts until the end of your next turn. Each enemy that starts its turn within the zone cannot teleport until the start of its next turn. Each ally who starts his or her turn within the zone gains a +2 power bonus to speed until the start of his or her next turn.",("close burst",10)),
                 Sustain("minor","The zone persists")],"paragon","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Nature's Purge",["poison","primal"],"daily","standard",
                [Target("each enemy in burst",("close burst",3)),Atk([lambda x:max(x.mod("wis"),x.mod("str")),raising(2,10)],"fortitude",damage([3,8], [CONMOD])),
                 Hit("The target is dazed and slowed (save ends both).  If the target is an aberrant creature, then whenever it uses a psychic attack before the end of the encounter, it takes ongoing 10 poison damage (save ends)."),
                 Miss("Half damage, and the target is dazed and slowed until the end of your next turn.")],"paragon","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x: x.check("checkclass",primalclasses,True))

###Racial Paragon Classes###
,"chameleon":feat([ft("feat",[
        feat([ft("paragonname","chameleon")]),
                feat([],"Coordinated Action","If you have not spent an AP in this encounter and ally spends an AP, you may spend an AP as immediate reaction to act immediately after ally",CHECK("level",11)),
                feat([],"Shifting Skill","During extended rest, gain training in skill ally is trained in until your next extended rest",CHECK("level",11)),
                feat([],"Power Focus",["During short rest, change power gained with Imitating Strike for ally's encounter attack power level 11 or lower",lambda x:max([1,x.mod("cha")])," radiant damage"],CHECK("level",16)),
                feat([ft("power",
                [Power("Imitating Strike",[],"daily","standard",
                [Requirement("You must use this power at the end of an extended rest"),
                 Effect("Until the end of your next extended rest, you can use an ally's class or paragon path encounter attack power of 11th level or lower as if it were your paragon path encounter attack power. The ally whose power you gain must be present during the entire extended rest before you use this power. You can use your Charisma for the attack roll and damage roll instead of the ability scores normally associated with that power's attack rolls and damage rolls. You do not need to meet the normal prerequisites to use the power, but you must meet any of its requirements.")],"paragon","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Perfect Mimicry",[],"daily","standard",
                [Requirement("You must use this power at the end of an extended rest"),
                 Effect("Until the end of your next extended rest, you can use an ally's class or paragon path utility power of 12th level or lower as if it were your paragon path utility power. The ally whose power you gain must be present during the entire extended rest before you use this power. You do not need to meet the normal prerequisites to use the power, but you must meet any of its requirements.")],"paragon","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Deadly Duplication",[],"daily","standard",
                [Requirement("You must use this power at the end of an extended rest"),
                 Effect("Until the end of your next extended rest, you can use an ally's class or paragon path daily attack power of 20th level or lower as if it were your paragon path daily attack power. The ally whose power you gain must be present during the entire extended rest before you use this power. You do not need to meet the normal prerequisites to use the power, but you must meet any of its requirements.")],"paragon","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkrace","changeling"))
,"lightwalker":feat([ft("feat",[
        feat([ft("paragonname","lightwalker")]),
                feat([],"Lightwalker Action",["When you spend an AP to use a radiant power, you or one ally regains ",lambda x:x.statret("level")/2," hit points"],CHECK("level",11)),
                feat([],"Walk the Bright Path","When you make a radiant attack, one ally in 5 squares of you gains combat advantage against the target until end of your next turn",CHECK("level",11)),
                feat([],"Radiant Renewal","Gain resist 10 radiant and resist 10 psychic, or increase existing resistance by 10",CHECK("level",16)),
                feat([ft("power",
                [Power("Illuminate the Adversary",["divine","implement","radiant"],"encounter","standard",
                [Target("one creature",("ranged",10)),Atk([WISMOD],"reflex",damage([2,6], [WISMOD])),
                 Hit("The target takes a -2 penalty to AC and Relfex until the end of your next turn.  In addition, squares within 10 squares of the target are illuminated with bright light until the end of your next turn.")],"paragon","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Path of Light",["conjuration","divine"],"daily","minor",
                [Effect("You conjure a path of solid light in unoccupied squares within range.  The path is flat, can support any weight, and must have at least 1 square on a solid surface.  The path can ascend or descend 1 square vertically for each square it traverses horizontally.  The path lasts until the end of your next turn.",("area wall",8,10)),
                 Line("Any bloodied ally gains regeneration 10 while occupying one of the path's squares."),
                 Sustain("minor","The path persists")],"paragon","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Call the Light",["divine","healing","implement","radiant"],"daily","standard",
                [Target("one, two, or three creature",("ranged",10)),Atk([WISMOD],"will",damage([2,10], [WISMOD])),
                 Hit("You or one ally within 5 squares of you regains 10 hit points."),
                 Miss("Half damage, and you or one ally within 5 squares of you regains 5 hit points.")],"paragon","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",lambda x: x.check("checkclass",divineclasses,True) and x.check("deity","the silver flame"))
,"warforged juggernaut":feat([ft("feat",[
        feat([ft("paragonname","warforged juggernaut")]),
                feat([],"Charging Action","When you spend an AP to make a charge attack, gain +2 to speed and all defenses until the end of your next turn, and you can continue your turn after the charge",CHECK("level",11)),
                feat([],"Charging Strike",["When you hit with a charge, deal ",raising(1,20),"d6 extra damage and push the target 1 square; you can shift into a square the target vacated"],CHECK("level",11)),
                feat([],"Construct Perfection",["Gain a +2 bonus to saving throws and endurance checks",lambda x:max([1,x.mod("cha")])," radiant damage"],CHECK("level",16)),
                feat([],"Unstoppable","When you spend an action point, you can make a saving throw",CHECK("level",16)),
                feat([ft("power",
                [Power("Ruionous Onslaught",["weapon"],"encounter","standard",
                [Target("one creature"),Atk([STRMOD],"AC",damage(2,[STRMOD]),[]),
                 Hit("The target is dazed until the end of your next turn"),
                 Special("When charging, you can use this power in place of a melee basic attack.")],"paragon","encounter",11)])],"","",
                CHECK("level",11)),
                feat([ft("power",
                [Power("Inexorable Momentum",[],"encounter","minor",
                [Effect("Until the end of your next turn, you ignore difficult terrain, can move through enemy spaces, and gain a +2 power bonus to AC against opportunity attacks.")],"paragon","utility",12)])],"","",
                CHECK("level",12)),
                feat([ft("power",
                [Power("Crag of Steel",["stance","weapon"],"daily","standard",
                [Effect("Until the stance ends, you gain resist 5 to all damage, and whenever this reduces an attack's damage to 0, you also negate that attack's effect on you. Additionally, until the stance ends, you can reduce the distance you are pulled, pushed, or slid by 5 squares, and any enemy that starts its turn adjacent to you takes 1[W] damage while you are able to make opportunity attacks")],"paragon","daily",20)])],"","",
                CHECK("level",20)),
                 ])],
                 "paragon","",CHECK("checkrace","changeling"))

###Feat-based Paragon Classes###
,"alchemist savant":feat([ft("feat",[
        feat([ft("paragonname","alchemist savant")]),
                feat([],"Alchemical Action",["When spending AP to attack with an alchemical item add ",INTMOD," to the attack roll."],CHECK("level",11)),
                feat([],"Alchemical Innovator",["Master ",raiselist(2,[21,25])," new alchemical formulas of your choice"],CHECK("level",11)),
                feat([],"Resourceful Alchemist","When making alchemical items, use existing items as components.  Value of old component is subtracted from cost of new component, excess is lost",CHECK("level",11)),
                feat([ft("alchemicalattack",["",2])],"Alchemy Master","Gain a +2 bonus to attack rolls with alchemical items",CHECK("level",16)),
                feat([Power("Quick Admixture",["arcane"],"encounter","minor",
                            [Effect("You use an alchemical item without spending its required action.")],"paragon","encounter",11)],"","",
                             CHECK("level",11)),
                feat([Power("Secret Recipe",["arcane"],"daily","free",
                            [Trigger("You use an alchemical item of your level or lower"),
                             Effect("You create a duplicate of the triggering alchemical item.  The duplicate lasts until the end of the encounter.")],"paragon","utility",12)],"","",
                            CHECK("level",12)),
                feat([Power("Spell Magnet",["arcane","conjuration","implement","lightning"],"daily","minor",
                            [Effect("You throw a stone into an unoccupied square within range.  The stone creates a spell magnet, a runecovered pillar 2 squares high that occupies the square.  Any enemy within 3 squares of the spell magnet takes a -2 penalty to all defenses against your arcane attacks and a -2 penalty to saving throws against ongoing damage.  The spell magnet lasts until the end of the encounter or until you dismiss it as a free action.  In addition, you can make the following attack with the spell magnet once per round.",("ranged",10)),
                             Other("Minor Action"),
                             Target("each enemy in burst",("close burst",5)),Atk([INTMOD],"reflex",None),
                             Hit("Ongoing 10 lightning damage (save ends).  The spell magnet pulls the target 5 squares.")],"paragon","daily",20)],"","",
                             CHECK("level",20))])],
                 "paragon","",CHECK("feature","alchemist"))
###Paragon Multiclass###
,"paragon multiclass":feat([ft("feat",[
        feat([ft("paragonname","paragon multiclass")]),
                feat([ft("powerpick",PowerPick("paragonmulticlass",11,MAXLEVEL+1,"Multiclass At-Will"))],"Paragon At-Will","",CHECK("level",11)),
                feat([ft("powerpick",PowerPick("paragonmulticlass",11,MAXLEVEL+1,"Multiclass Encounter"))],"Paragon Encounter","",CHECK("level",11)),
                feat([ft("powerpick",PowerPick("paragonmulticlass",12,MAXLEVEL+1,"Multiclass Utility"))],"Paragon Utility","",CHECK("level",12)),
                feat([ft("powerpick",PowerPick("paragonmulticlass",20,MAXLEVEL+1,"Multiclass Daily"))],"Paragon Daily","",CHECK("level",20))])],
                 "paragon","",lambda x:len(x.statret("checkclass"))>1 and "acolyte power" in x.statret("feature") and "adept power" in x.statret("feature") and "novice power" in x.statret("feature"))
}
#--------------------------------------------------------------------------------
#                                Epic Classes
#--------------------------------------------------------------------------------
epicList={
###PHB###
"archmage":feat([ft("feat",[
        feat([ft("epicname","archmage")]),
                feat([],"Spell Recall","At the beginning of each day choose a spell you have ready for the day.  You can cast that spell twice today.",CHECK("level",21)),
                feat([],"Arcane Spirit","1/day when you die become an arcane spirit, rejoin body after end of encounter (if body is still present)",CHECK("level",24)),
                feat([PowerMod(["arcane","daily"],["often","encounter"],"You may now cast "," as an encounter spell (rather than a daily spell).")],"Archspell",CHECK("level",30)),
                feat([ft("power",
                [Power("Shape Magic",[],"daily","standard",
                [Effect("You regain one arcane power you have already used.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x:x.check("checkclass","wizard"))
,"deadly trickster":feat([ft("feat",[
        feat([ft("epicname","deadly trickster")]),
                feat([],"Sly Fortune's Favor","Three times per day, as a free action, reroll a d20 roll",CHECK("level",21)),
                feat([],"Trickster's Control","If you roll an 18 or higher on the first attack roll for an encounter or daily power, the power is not expended",CHECK("level",24)),
                feat([],"Trickster's Disposition","Once per day, you can tell the DM to treat the result of a d20 roll he just made as a 1.  No rerolls possible.",CHECK("level",30)),
                feat([ft("power",
                [Power("Epic Trick",["healing"],"daily","minor",
                [Effect("Regain all of your hit points and healing surges, automatically save against all effects on you, recover all expended encounter powers, or recover all expended daily powers except this one.  Once you use this power, you cannot recover it except by taking an extended rest.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x:(x.check("cha",21) or x.check("dex",21)) and x.check("training",["acrobatics","bluff","stealth","thievery"],True))
,"demigod":feat([ft("feat",[
        feat([ft("epicname","demigod")]),
                feat([specialMenu(["strength and constitution","strength and dexterity","strength and intelligence","strength and wisdom","strength and charisma","constitution and dexterity","constitution and intelligence","constitution and wisdom","constitution and charisma","dexterity and intelligence","dexterity and wisdom","dexterity and charisma","intelligence and wisdom","intelligence and charisma","wisdom and charisma"],[feat([ft("str",["",2]),ft("con",["",2])]),feat([ft("str",["",2]),ft("dex",["",2])]),feat([ft("str",["",2]),ft("int",["",2])]),feat([ft("str",["",2]),ft("wis",["",2])]),feat([ft("str",["",2]),ft("cha",["",2])]),feat([ft("con",["",2]),ft("dex",["",2])]),feat([ft("con",["",2]),ft("int",["",2])]),feat([ft("con",["",2]),ft("wis",["",2])]),feat([ft("con",["",2]),ft("cha",["",2])]),feat([ft("dex",["",2]),ft("int",["",2])]),feat([ft("dex",["",2]),ft("wis",["",2])]),feat([ft("dex",["",2]),ft("cha",["",2])]),feat([ft("int",["",2]),ft("wis",["",2])]),feat([ft("int",["",2]),ft("cha",["",2])]),feat([ft("wis",["",2]),ft("cha",["",2])])]
                     ,"Increase "," by 2 each")],"Divine Spark","",CHECK("level",21)),
                feat([],"Divine Recovery",["The first time you are reduced to 0 hit points or fewer each day, regain ",lambda x:x.statret("hp")/2," hit points."],CHECK("level",24)),
                feat([],"Divine Miracle","The first time in an encounter you expend your last encounter power, you regain the use of one encounter power of your choice.",CHECK("level",30)),
                feat([ft("power",
                [Power("Divine Regeneration",[],"daily","standard",
                [Effect(["You gain ",lambda x: max([x.statret("str"),x.statret("con"),x.statret("dex"),x.statret("int"),x.statret("wis"),x.statret("cha")])," regeneration until the end of the encounter."])],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x: True)
,"eternal seeker":feat([ft("feat",[
        feat([ft("epicname","eternal seeker")]),
                feat([ft("encounterpowerchoices",x) for x in classes]+[ft("dailypowerchoices",x) for x in classes],"Seeker of the Many Paths","When you gain an encounter or daily power by gaining a level, it may come from any class.",CHECK("level",21)),
                feat([],"Eternal Action","When you spend an action point on an extra action, you also get an extra action on your next turn.",CHECK("level",24)),
                feat([ft("powerpick",PowerPick(sorted(sumlist([powerList[x+"utility22"].values() for x in classes])),22, MAXLEVEL+1, "Seeker's Lore"))],"class power","",CHECK("level",26)),
                feat([],"Seeker's Lore","Gain one 22nd level utility power from any class",CHECK("level",26)),
#Seeking destiny
                feat([],"Seeking Destiny","You gain the 24th level epic destiny feature from any other epic destiny you qualify for",CHECK("level",30))
                ])],
                 "epic","",lambda x:True)
###PHB2###
,"fatesinger":feat([ft("feat",[
        feat([ft("epicname","fatesinger")]),
                feat([],"Destiny Fulfilled","Spend AP to allow ally in 20 squares to make an attack as free act;  if ally's attack hits, regain the AP"),
                feat([],"Fate's Clarity","Majestic Word target rolls twice on attacks, saves, and skill/ability checks until start of your next turn",CHECK("level",24)),
                feat([],"Heroic Inspiration","When ally in 5 squares spends an AP to attack, you and all allies can spend healing surge as a free action",CHECK("level",30)),
                feat([ft("power",
                [Power("Fragment of the Song",[],"daily","minor",
                [Effect("The burst creates a zone of emboldening music that lasts until the end of your next turn.  While within the zone, you and each ally can spend an action point to take two extra actions, instead of one.  As a move action, you can move the zone 3 squares.",("close burst",5)),
                 Sustain()],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x: x.check("checkclass","bard"))
,"glorious spirit":feat([ft("feat",[
        feat([ft("epicname","glorious spirit")]),
                feat([Power("Worthy Foe",[],"encounter","minor",
                            [Effect("Designate the enemy nearest to you as a worthy foe until the end of the encounter. Until the start of your next turn, your attacks against the worthy foe ignore any resistance and the insubstantial quality."),
                             Line("In addition, once per round, you can deal 2d8 extra damage to the worthy foe on a hit. If you can make multiple attacks against the worthy foe during your turn, you decide which attack to apply the extra damage to after all the attacks are rolled."),
                             Line("Finally, if you reduce the worthy foe to 0 hit points, you can spend a healing surge as a free action.")],"epic","class feature",21)],"Worthy Foe"),
                feat([],"Seeker of Foes","1/encounter as move action teleport to a space adjacent to any creature you can see",CHECK("level",24)),
                feat([],"Bearer of Doom","If your worthy foe is the only target of your attack and that attack misses, retain the use of the power",CHECK("level",30)),
                feat([ft("power",
                [Power("Spirit Steed",[],"at-will","immediate reaction",
                [Trigger("The enemy designated by your Worthy Foe feature ends its movement within 6 squares of you"),
                 Effect("You fly and land in a space adjacent to the triggering enemy.  This movement doesn't provoke opportunity attacks.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x: x.check("checkclass",primalclasses,True))
,"harbinger of doom":feat([ft("feat",[
        feat([ft("epicname","harbinger of doom")]),
                feat([],"Shield of Ill Fortune","Reroll natural 1 on attack rolls; enemies that roll natural 1 against you are stunned until end of your next turn, and you slide them 3 squares"),
                feat([],"Master of Ill Fortune","1/encounter, when creature in 10 squares drops to 0, make a save or spend a healing surge",CHECK("level",24)),
                feat([],"Doom's Reward",["Whenever you make an attack and miss every target, gain ",lambda x:x.statret("level")/2," temporary hit points."],CHECK("level",30)),
                feat([ft("power",
                [Power("Cloak of Doom",[],"daily","minor",
                [Effect("Until the end of the encounter, any enemy within 3 squares of you grants combat advantage to your allies, cannot teleport, and takes 5 damage whenever it misses with an attack.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x: True)
,"lorekeeper":feat([ft("feat",[
        feat([ft("epicname","lorekeeper")]),
                feat([],"Lorekeeper's Wisdom","Roll twice on monster knowledge checks, +2 to damage against monsters if you are trained in their knowledge skill"),
                feat([],"Lorekeeper's Cunning","Roll twice on skill checks for rituals; 2x ritual time for 1/2 cost; when trained in monster's knowledge, crit grants +2 to attacks against target until end of next turn",CHECK("level",24)),
#Lorekeeper's Revelation
                feat([],"Lorekeeper's Revelation","Two daily utility powers are now encounter powers for you",CHECK("level",30)),
                feat([ft("power",
                [Power("True Name",[],"encounter","standard",
                [Target("One creature in burst",("close burst",10)),
                 Effect(["Until the end of your next turn, you and your allies gain a +",lambda x:max(x.mod("wis"),x.mod("int"))," bonus to damage rolls against the target."])],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x: True)
,"primal avatar":feat([ft("feat",[
        feat([ft("epicname","primal avatar")]),
                feat([],"Primal Travel","When any enemy hits you with a melee attack, you can teleport 3 squares as an immediate reaction"),
                feat([],"Spirit Boon","After each extended rest, choose one ability score and gain +1 to attack rolls, skill checks, and ability checks with that ability",CHECK("level",24)),
                feat([],"Eternal Return",["1/day when you die with 2 healing surges remaining, will yourself back to life by spending both within 10 rounds of your death.  Return at bloodied value free of effects that a save can end"],CHECK("level",30)),
                feat([ft("power",
                [Power("Walk with the Spirits",[],"daily","minor",
                [Effect("Your body disappears, and you appear in spirit form in an adjacent space. While you are in this form, you are insubstantial and gain phasing. You also gain a fly speed equal to your speed, and you can hover. You can use at-will powers and encounter powers, but you cannot use daily powers, magic item powers, or rituals. You can remain in this form until you end it as a standard action, until you drop to 0 hit points or fewer, or until you take a short rest or an extended rest. When you leave this form, your body reappears, rejoined by your spirit, in your current space.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x:x.check("checkclass",primalclasses,True))
,"revered one":feat([ft("feat",[
        feat([ft("epicname","revered one")]),
                feat([],"Immortal Foe",["Immortal creatures take -2 penalty to attacks against you, you gain +",WISMOD," bonus to damage rolls against them"]),
                feat([],"Manifest the Divine","Use each of your channel divinity powers 1/encounter;  You can select any channel divinity feat regardless of god",CHECK("level",24)),
                feat([],"Bestow Grace","When ally in 20 drops to 0 or fewer, spend healing surge as immediate interrupt - ally regains HP as if they had spent the surge",CHECK("level",30)),
                feat([ft("power",
                [Power("Serene Protection",[],"daily","minor",
                [Target("you and each ally in burst",("close burst",5)),
                 Effect("Choose a damage type: acid, cold, fire, force, lightning, necrotic, poison, psychic, radiant, or thunder.  Each target gains resist 30 to that damage type until the end of your next turn."),
                 Sustain("minor","The resistance persists.")],"epic","utility",26)])],"","",
                CHECK("level",26))
                 ])],
                 "epic","",lambda x:x.check("checkclass",divineclasses,True))
###Arcane Power###
,"sage of ages":feat([ft("feat",[
        feat([ft("epicname","sage of ages")]),
                feat([ft(["arcana","dungeoneering","history","nature","religion"],["",6])],"Paragon of Learning","+6 bonus to Arcana, Dungeoneering, History, Nature, and Religion checks.",CHECK("level",21)),
                feat([],"Keeper's Presence","At the start of each turn, roll a d20.  You may use this in place of another d20 roll before start of your next turn.",CHECK("level",24)),
                feat([],"Reverse Time","1/day, instead of being reduced to 0 or less, regain max HP and act next in initiative order",CHECK("level",26)),
                feat([ft("power",
                         [Power("Trick of Knowledge",["arcane"],"encounter","minor",
                        [Effect("You make an Arcana check and gain a benefit based on your check result until the end of the encounter."),
                         Line("30 or lower: No effect"),
                         Line("31-35: +5 bonus to saving throws"),
                         Line("36-40: +2 bonus to all defenses"),
                         Line("41-45: +2 bonus to attack rolls with arcane powers"),
                         Line("46-50: Make saving throws at the start of your turn instead of the end of your turn"),
                         Line("51-55: Pick two benefits you can gain from a roll of 31 through 50"),
                         Line("56-60: Pick three benefits you can gain from a roll of 31 through 50"),
                         Line("61 or higher: Gain all four benefits you can gain from a roll of 31 through 50")],"epic","utility",26)])]
                         ,"","",CHECK("level",26))
                         ])], "epic","",lambda x:x.check("checkclass",arcaneclasses,True))
###Primal Power###
,"world tree guardian":feat([ft("feat",[
        feat([ft("epicname","world tree guardian")]),
                feat([],"Bark of the World Tree",["Whenever an enemy hits you, gain resist ",lambda x:x.mod("con")+5," to all damage until start of your next turn"],CHECK("level",21)),
                feat([],"Boon of the World Tree","1/day die in place of ally.  Ally HP = bloodied value.  At end of your next turn, your HP = healing surge value, gain regen 10 while bloodied",CHECK("level",24)),
                feat([],"World Tree's Growth","You have regeneration equal to the number of healing surges you have remaining",CHECK("level",26)),
                feat([ft("power",
                         [Power("Boughs of the World Tree",["conjuration","primal"],"daily","standard",
                        [Effect("You conjure boughs of the World Tree in five unoccupied squares in the burst that aren't adjacent to one another.  The boughs last until the end of your next turn.  The boughs are solid obstacles, and each square adjacent to them is difficult terrain for your enemies.",("close burst",20)),
                         Line("The boughs can be attacked.  Each has resist 20 to all damage, and a bough is destroyed if it takes any damage."),
                         Line("When you use this power, choose any of the following benefits:"),
                         Line("\t-Your allies gain a +1 bonus to attack rolls while adjacent to a bough"),
                         Line("\t-Your allies gain a +1 bonus to all defenses while adjacent to a bough"),
                         Line(["\t-Any ally who begins his or her turn adjacent to a bough gains ",lambda x:max(x.mod("str"),x.mod("wis"))," temporary hit points"]),
                         Sustain("minor","The boughs persist")],"epic","utility",26)])]
                         ,"","",CHECK("level",26))
                         ])], "epic","",lambda x:x.check("checkclass",primalclasses,True))
          }

